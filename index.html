<!doctype html>
<html lang="ru">


<head>
  <meta charset="utf-8" />
  <title>Sales Genius | App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <meta name="format-detection" content="telephone=no" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Montserrat:wght@700&display=swap"
    rel="stylesheet" />
  <style>
    :root {
      --bg: #0b0c15;
      --text: #f4f6fa;
      --muted: #a7acc2;
      --primary: #7b5bff;
      --mint: #3de0c5;
      --blue: #5b8cff;
      --card: rgba(255, 255, 255, .05);
      --stroke: rgba(255, 255, 255, .10);
      --toast: #0f1221;
      --border: rgba(255, 255, 255, .10);
      --radius: 14px;
      --pad: 14px;
      --content-max: 1080px;
    }

    * {
      box-sizing: border-box
    }

    html,
    body {
      height: 100%
    }

    body {
      margin: 0;
      background: var(--bg);
      color: var(--text);
      font: 16px/1.45 Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    }

    .wrap {
      max-width: var(--content-max);
      margin: 0 auto;
      padding: 16px 14px 48px;
    }

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 12px
    }

    .brand-wrap {
      display: flex;
      align-items: center;
      gap: 12px
    }

    .logo {
      width: 44px;
      height: 44px;
      border-radius: 9px;
      background: #0f1318;
      border: 1px solid #0f1318;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden
    }

    .brand {
      font-family: Montserrat, Inter, sans-serif;
      font-weight: 700;
      letter-spacing: .2px
    }

    nav#spa-nav {
      position: sticky;
      top: 0;
      z-index: 20;
      display: flex;
      gap: 8px;
      overflow: hidden;
      padding: 6px;
      margin: 8px 0 18px;
      background: rgba(10, 12, 22, .65);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, .06);
      border-radius: 16px;
      box-shadow: 0 10px 24px rgba(0, 0, 0, .35);
      justify-content: flex-start;
      align-items: center
    }

    #spa-nav .track {
      position: relative;
      display: flex;
      gap: 8px;
      overflow-x: auto;
      -ms-overflow-style: none;
      scrollbar-width: none;
      padding: 6px 8px;
      -webkit-overflow-scrolling: touch;
      scroll-snap-type: x proximity;
      scroll-snap-stop: always;
      overscroll-behavior-x: contain;
      align-items: center;
      touch-action: pan-x;
    }

    #spa-nav .track::-webkit-scrollbar {
      display: none
    }

    #spa-nav .btn {
      appearance: none;
      border: 1px solid transparent;
      background: transparent;
      color: var(--text);
      font-weight: 700;
      font-size: 14px;
      padding: 9px 12px;
      border-radius: 12px;
      cursor: pointer;
      text-decoration: none;
      transition: .18s;
      white-space: nowrap;
      position: relative;
      flex: 0 0 auto;
      z-index: 1;
      -webkit-tap-highlight-color: transparent;
      scroll-snap-align: center;
      scroll-snap-stop: always;
    }

    #spa-nav .btn.active {
      background: transparent;
      color: var(--text);
      box-shadow: none
    }

    #spa-nav .bubble {
      position: absolute;
      z-index: 0;
      height: 34px;
      border-radius: 12px;
      background: linear-gradient(135deg, var(--primary), var(--mint));
      box-shadow: 0 10px 22px rgba(91, 140, 255, .35);
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      transition: left .12s cubic-bezier(.2, .8, .2, 1), width .12s cubic-bezier(.2, .8, .2, 1);
      will-change: left, width;
      pointer-events: none;
      opacity: .95
    }

    #spa-nav .bubble.fast {
      transition: none
    }

    .h1 {
      font-size: 19px;
      line-height: 1.2;
      font-weight: 800;
      margin: 14px 0 10px
    }

    .h1 span {
      background: linear-gradient(90deg, var(--blue), var(--mint));
      -webkit-background-clip: text;
      color: transparent
    }

    .lead {
      color: var(--muted);
      font-size: 17px;
      max-width: 820px
    }

    .grid {
      display: grid;
      gap: 14px
    }

    @media(min-width:920px) {
      .grid-2 {
        grid-template-columns: repeat(2, 1fr)
      }

      .h1 {
        font-size: 44px
      }
    }

    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 20px;
      padding: 18px;
      backdrop-filter: blur(8px)
    }

    .card h3 {
      margin: 0 0 8px;
      font-size: 18px
    }

    .list {
      list-style: none;
      margin: 0;
      padding: 0;
      display: grid;
      gap: 10px;
      color: var(--muted)
    }

    .list li {
      display: flex;
      gap: 10px;
      align-items: flex-start
    }

    .dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      margin-top: 6px;
      background: linear-gradient(135deg, var(--mint), var(--primary))
    }

    .btn {
      appearance: none;
      border: 1px solid var(--border);
      background: #141a21;
      color: var(--text);
      padding: 10px 12px;
      border-radius: 14px;
      cursor: pointer;
      transition: .18s
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--primary), var(--mint));
      color: #fdfeff;
      border-color: transparent;
      font-weight: 800
    }

    .btn-ghost {
      background: transparent;
      border-color: var(--border);
      color: var(--text)
    }

    .highlight-banner {
      margin: 14px 0;
      padding: 12px 14px;
      border-radius: 12px;
      background: linear-gradient(135deg, rgba(61, 224, 197, .12), rgba(123, 91, 255, .16));
      color: #fdfeff;
      font-weight: 600;
      font-size: 15px
    }

    /* Calendar */
    .cal-wrap {
      display: grid;
      gap: 12px
    }

    .dur-row {
      display: flex;
      gap: 8px;
      flex-wrap: wrap
    }

    .calendar {
      user-select: none;
      background: #0f141a;
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 10px
    }

    .cal-head {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px
    }

    .cal-head .mon {
      font-weight: 800
    }

    .cal-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 6px
    }

    .cal-cell {
      height: 36px;
      display: grid;
      place-items: center;
      border-radius: 10px;
      border: 1px solid rgba(255, 255, 255, .08);
      background: rgba(255, 255, 255, .03);
      font-weight: 600;
      cursor: pointer;
      transition: transform .15s ease, background .15s ease, color .15s ease
    }

    .cal-cell:hover {
      transform: translateY(-1px)
    }

    .cal-cell.muted {
      opacity: .35
    }

    .cal-cell.off {
      opacity: .25;
      pointer-events: none
    }

    .cal-cell.sel {
      color: #f7f7f8;
      background: linear-gradient(135deg, var(--primary), var(--mint));
      border-color: transparent
    }

    .cal-dow {
      opacity: .6;
      font-weight: 700;
      font-size: 12px
    }

    .slots {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      opacity: 0;
      transform: translateY(4px);
      transition: all .2s ease
    }

    .slots.show {
      opacity: 1;
      transform: translateY(0)
    }

    .contact-row {
      display: flex;
      gap: 8px;
      flex-wrap: wrap
    }

    input[type="tel"],
    input[type="text"] {
      flex: 1;
      min-width: 220px;
      background: #0f141a;
      border: 1px solid var(--border);
      border-radius: 12px;
      color: var(--text);
      padding: 10px 12px;
      font-size: 16px;
      outline: none
    }

    input::placeholder {
      color: #6e7786
    }

    /* Toasts */
    .toasts {
      position: fixed;
      right: 12px;
      bottom: 12px;
      display: grid;
      gap: 8px;
      z-index: 99999
    }

    .toast {
      background: #0f1318;
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 10px 12px;
      box-shadow: 0 8px 30px rgba(0, 0, 0, .35)
    }

    .toast .t {
      font-weight: 800;
      margin-bottom: 2px
    }

    .toast .m {
      font-size: 13px;
      color: var(--muted)
    }


    /* === HOME blocks (calc + steps) === */
    .savings {
      display: grid;
      gap: 8px;
    }

    .savings .row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }

    .savings .row label {
      font-size: 14px;
      opacity: .9;
    }

    .savings input[type=range] {
      width: 50%;
    }

    .savings .stat {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .big {
      font-size: 28px;
      font-weight: 800;
      letter-spacing: 0.3px;
    }
  </style>
  <style>
    /* Tables */
    .table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0 8px
    }

    .table th {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: .06em;
      color: var(--muted);
      text-align: left;
      padding: 4px 8px
    }

    .table td {
      background: rgba(255, 255, 255, .03);
      border: 1px solid var(--border);
      padding: 10px 12px;
      border-radius: 10px
    }

    .table tr td:first-child {
      border-top-right-radius: 0;
      border-bottom-right-radius: 0
    }

    .table tr td:last-child {
      border-top-left-radius: 0;
      border-bottom-left-radius: 0
    }

    .pill {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 9999px;
      border: 1px solid var(--border);
      font-size: 12px;
      color: var(--muted)
    }

    .muted-sm {
      color: var(--muted);
      font-size: 16px
    }
  </style>
  <!-- overrides for nav menu look & behavior -->
  <style>
    /* Center the nav row and keep carousel scroll */
    nav#spa-nav {
      justify-content: flex-start;
    }

    #spa-nav .track {
      position: relative;
      display: flex;
      gap: 8px;
      overflow-x: auto;
      -ms-overflow-style: none;
      scrollbar-width: none;
      padding: 6px 8px;
      -webkit-overflow-scrolling: touch;
      scroll-snap-type: x proximity;
    }

    /* Buttons sit ABOVE the moving bubble so text is never covered */
    #spa-nav .btn {
      position: relative;
      z-index: 1;
      -webkit-tap-highlight-color: transparent;
    }

    /* Do not visually highlight active button itself */
    #spa-nav .btn.active {
      background: transparent !important;
      color: var(--text) !important;
      box-shadow: none !important;
    }

    #spa-nav .btn:active {
      transform: none;
    }

    /* Bubble floats under text and doesn't catch clicks */
    #spa-nav .bubble {
      z-index: 0;
      pointer-events: none;
      opacity: .92;
    }
  </style>
  <style>
    /* –ö–Ω–æ–ø–∫–∞ –≤—ã–∑–æ–≤–∞ (FAB) ‚Äî –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å —Å–≤–æ–π –≤–∞—Ä–∏–∞–Ω—Ç, —ç—Ç–æ –∫—Ä–∞—Å–∏–≤—ã–π –¥–µ—Ñ–æ–ª—Ç */
    .profile-toggle {
      position: fixed;
      right: 14px;
      bottom: 14px;
      z-index: 4000;
      padding: 10px 12px;
      border-radius: 14px;
      font-weight: 600;
      border: 0;
      background: linear-gradient(135deg, var(--mint, #3de0c5), var(--primary, #7b5bff));
      color: #fbfbfb;
      box-shadow: 0 10px 30px rgba(0, 0, 0, .35);
    }

    .profile-toggle:active {
      transform: translateY(1px);
      filter: brightness(.96);
    }

    /* –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –ª–∏—Å—Ç–∞ (–µ—Å–ª–∏ —É–∂–µ –µ—Å—Ç—å ‚Äî –º–æ–∂–Ω–æ –Ω–µ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å) */
    .sheet-backdrop {
      position: fixed;
      inset: 0;
      z-index: 3998;
      background: rgba(0, 0, 0, .38);
      backdrop-filter: blur(2px);
      opacity: 0;
      pointer-events: none;
      transition: opacity .2s;
    }

    .sheet-backdrop.open {
      opacity: 1;
      pointer-events: auto;
    }

    .sheet {
      position: fixed;
      left: 0;
      right: 0;
      bottom: -100%;
      z-index: 3999;
      background: rgba(20, 22, 35, .98);
      border-top-left-radius: 18px;
      border-top-right-radius: 18px;
      box-shadow: 0 -10px 40px rgba(0, 0, 0, .5);
      transition: transform .22s ease, bottom .22s ease;
      transform: translateY(14px);
    }

    .sheet.open {
      bottom: 0;
      transform: none;
    }

    .sheet .grab {
      width: 44px;
      height: 5px;
      border-radius: 99px;
      background: rgba(255, 255, 255, .18);
      margin: 8px auto 4px;
    }

    /* –í–Ω—É—Ç—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –ø—Ä–æ—Ñ–∏–ª—è */
    #profileSheet {
      padding-bottom: 14px;
    }

    #profileSheet .sheet-bar {
      padding: 8px 14px 6px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    #profileSheet .sheet-title {
      font-weight: 900;
    }

    #profileSheet .sheet-head {
      display: flex;
      gap: 12px;
      align-items: center;
      padding: 6px 14px 4px;
    }

    #profileSheet .ava {
      position: relative;
      width: 52px;
      height: 52px;
      flex: 0 0 52px;
    }

    #profileSheet .ava img {
      display: none;
      width: 100%;
      height: 100%;
      border-radius: 27px;
      object-fit: cover;
      border: 1px solid rgba(255, 255, 255, .18);
      background: #1d2230;
    }

    #profileSheet .ava-fallback {
      position: absolute;
      inset: 0;
      display: grid;
      place-items: center;
      border-radius: 14px;
      font-weight: 900;
      font-size: 20px;
      letter-spacing: .5px;
      color: #0b0f12;
      background: linear-gradient(135deg, var(--mint, #3de0c5), var(--primary, #7b5bff));
      border: 1px solid rgba(255, 255, 255, .12);
    }

    #profileSheet .who .name {
      font-weight: 900;
      font-size: 18px;
    }

    #profileSheet .who .handle {
      opacity: .8;
    }

    #profileSheet .sheet-stats {
      padding: 6px 14px 12px;
      display: grid;
      gap: 10px;
    }

    @media (min-width:760px) {
      #profileSheet .sheet-stats {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
    }

    #profileSheet .stat {
      background: rgba(255, 255, 255, .03);
      border: 1px solid var(--stroke, rgba(255, 255, 255, .12));
      border-radius: 12px;
      padding: 10px 12px;
    }

    #profileSheet .stat .label {
      opacity: .85;
      font-weight: 700;
      margin-bottom: 6px;
    }

    #profileSheet .stat .value {
      font-size: 20px;
      font-weight: 900;
      letter-spacing: .3px;
    }
  </style>

  <style>
    /* –î–≤–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ä–∞–º–∫–∏ */
    .stat-chips {
      display: grid;
      grid-template-columns: 1fr;
      /* –Ω–∞ –º–æ–±–∏–ª–µ –≤ —Å—Ç–æ–ª–±–∏–∫ */
      gap: 8px;
      margin: 8px 0;
    }

    .stat-chips.equal {
      /* –Ω–∞ —à–∏—Ä–∏–Ω–µ –ø–æ—à–∏—Ä–µ ‚Äî –≤ –¥–≤–µ –∫–æ–ª–æ–Ω–∫–∏ */
      grid-template-columns: 1fr 1fr;
    }

    @media (max-width:520px) {
      .stat-chips.equal {
        grid-template-columns: 1fr;
      }
    }

    .chip {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 8px;
      padding: 10px 12px;
      border: 1px solid var(--border, rgba(255, 255, 255, .14));
      border-radius: 12px;
      background: linear-gradient(135deg, rgba(61, 224, 197, .12), rgba(123, 91, 255, .16));
      font-weight: 700;
    }

    .chip .label {
      opacity: .9;
      font-weight: 600;
    }
  </style>

  <style>
    /* –ë–∞–∑–∞ */
    .savings input[type=range] {
      -webkit-appearance: none;
      appearance: none;
      width: 100%;
      height: 14px;
      background: transparent;
    }

    /* –î–æ—Ä–æ–∂–∫–∞ (WebKit/Chromium/Edge) */
    .savings input[type=range]::-webkit-slider-runnable-track {
      height: 8px;
      border-radius: 999px;
      background: rgba(255, 255, 255, .18);
    }

    /* –ë–µ–≥—É–Ω–æ–∫ (–∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–π, –∫—Ä—É–ø–Ω—ã–π) */
    .savings input[type=range]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 24px;
      height: 24px;
      border-radius: 6px;
      /* –∫–≤–∞–¥—Ä–∞—Ç + —Å–∫—Ä—É–≥–ª–µ–Ω–∏–µ */
      background: linear-gradient(135deg, var(--mint, #3de0c5), var(--primary, #7b5bff));
      border: 0;
      box-shadow: 0 2px 6px rgba(0, 0, 0, .35);
      margin-top: -8px;
      cursor: pointer;
      /* —Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –ø–æ –¥–æ—Ä–æ–∂–∫–µ */
    }

    /* Firefox –¥–æ—Ä–æ–∂–∫–∞/–ø—Ä–æ–≥—Ä–µ—Å—Å */
    .savings input[type=range]::-moz-range-track {
      height: 8px;
      border-radius: 999px;
      background: rgba(255, 255, 255, .18);
    }

    .savings input[type=range]::-moz-range-progress {
      height: 8px;
      border-radius: 999px;
      background: linear-gradient(90deg, var(--primary, #7b5bff), var(--mint, #3de0c5));
    }

    /* –ë–µ–≥—É–Ω–æ–∫ Firefox */
    .savings input[type=range]::-moz-range-thumb {
      width: 24px;
      height: 24px;
      border-radius: 6px;
      background: linear-gradient(135deg, var(--mint, #3de0c5), var(--primary, #7b5bff));
      border: 0;
      box-shadow: 0 2px 6px rgba(0, 0, 0, .35);
      cursor: pointer;
    }

    /* –§–æ–∫—É—Å/–∞–∫—Ç–∏–≤ */
    .savings input[type=range]:focus {
      outline: none;
    }

    .savings input[type=range]:active::-webkit-slider-thumb {
      transform: scale(1.04);
    }

    .savings input[type=range]:active::-moz-range-thumb {
      transform: scale(1.04);
    }
  </style>

  <style>
    #consult .consult-card {
      margin-top: 12px;
    }

    #consult .page-title {
      margin-bottom: 12px;
    }

    #consult .h3 {
      margin: 0 0 10px;
      font-weight: 800;
    }
  </style>

  <style>
    /* –±–∞–∑–æ–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
    #cal.calendar {
      position: relative;
      min-height: 260px;
      border-radius: 12px;
      overflow: hidden;
      --cal-spin: .9s;
      /* ‚Üê —Å–∫–æ—Ä–æ—Å—Ç—å –≤—Ä–∞—â–µ–Ω–∏—è (–ø–æ–º–µ–Ω—è–π –Ω–∞ 1.2s –∏–ª–∏ .6s) */
    }

    /* –º—è–≥–∫–∏–π —à–∏–º–º–µ—Ä, –ø–æ–∫–∞ –ø—É—Å—Ç–æ */
    #cal.calendar:empty::before {
      content: "–ó–∞–≥—Ä—É–∂–∞–µ–º –∫–∞–ª–µ–Ω–¥–∞—Ä—å‚Ä¶";
      position: absolute;
      inset: 0;
      display: flex;
      align-items: flex-end;
      justify-content: center;
      padding-bottom: 18px;
      color: #cfd3e6;
      font: 600 12px/1.2 system-ui, Segoe UI, Roboto, Arial, sans-serif;
      background: linear-gradient(100deg, rgba(255, 255, 255, .04) 30%, rgba(255, 255, 255, .10) 45%, rgba(255, 255, 255, .04) 60%);
      background-size: 200% 100%;
      animation: cal-shimmer 1.4s ease-in-out infinite;
    }

    /* —á–∞—Å–æ–≤–æ–µ –∫–æ–ª—å—Ü–æ + ¬´—Å—Ç—Ä–µ–ª–∫–∞¬ª –∏ –†–ï–ê–õ–¨–ù–û–ï –≤—Ä–∞—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ transform */
    #cal.calendar:empty::after {
      content: "";
      position: absolute;
      top: 42%;
      left: 50%;
      width: 60px;
      height: 60px;
      transform: translate(-50%, -50%) rotate(0deg);
      border-radius: 50%;
      /* —Å–ª–æ–π 1: –ª—ë–≥–∫–æ–µ –∫–æ–ª—å—Ü–æ; —Å–ª–æ–π 2: ¬´—Å—Ç—Ä–µ–ª–∫–∞-–∫–æ–º–µ—Ç–∞¬ª */
      background:
        radial-gradient(farthest-side, rgba(255, 255, 255, .10) 97%, transparent 98%) center/100% 100% no-repeat,
        conic-gradient(from 0turn, rgba(123, 91, 255, 1) 14%, rgba(123, 91, 255, 0) 42%);
      -webkit-mask: radial-gradient(farthest-side, transparent calc(50% - 10px), #000 calc(50% - 10px));
      mask: radial-gradient(farthest-side, transparent calc(50% - 10px), #000 calc(50% - 10px));
      filter: drop-shadow(0 2px 10px rgba(123, 91, 255, .35)) drop-shadow(0 0 18px rgba(61, 224, 197, .25));
      animation: cal-rot var(--cal-spin) linear infinite;
      /* ‚Üê —Å–∫–æ—Ä–æ—Å—Ç—å –±–µ—Ä—ë—Ç—Å—è –æ—Ç—Å—é–¥–∞ */
    }

    @keyframes cal-shimmer {
      from {
        background-position: 200% 0;
      }

      to {
        background-position: -200% 0;
      }
    }

    @keyframes cal-rot {
      to {
        transform: translate(-50%, -50%) rotate(360deg);
      }
    }

    /* –µ—Å–ª–∏ –≤ —Å–∏—Å—Ç–µ–º–µ –≤–∫–ª—é—á–µ–Ω–æ "—É–º–µ–Ω—å—à–∏—Ç—å –∞–Ω–∏–º–∞—Ü–∏—é", –º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å (—É–±–µ—Ä–∏ —ç—Ç–æ—Ç –±–ª–æ–∫, –µ—Å–ª–∏ —Ö–æ—á–µ—à—å –≤—Ä–∞—â–∞—Ç—å –≤—Å–µ–≥–¥–∞) */
    @media (prefers-reduced-motion: reduce) {

      #cal.calendar:empty::before,
      #cal.calendar:empty::after {
        animation: none;
      }
    }
  </style>

  <style>
    /* === Confirm button UX, CSS-only === */
    #confirmConsult {
      position: relative;
      overflow: hidden;
    }

    /* 1) –ú–æ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –æ—Ç–∫–ª–∏–∫ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ */
    #confirmConsult:active {
      transform: translateY(1px);
      filter: brightness(.92);
    }

    /* 2) –°–æ—Å—Ç–æ—è–Ω–∏–µ "–æ—Ç–ø—Ä–∞–≤–ª—è—é" ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ :disabled –ò–õ–ò aria-busy="true" */
    #confirmConsult:is(:disabled, [aria-busy="true"]) {
      pointer-events: none;
      opacity: .88;
      color: transparent;
      /* –ø—Ä—è—á–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç */
    }

    /* –°–ø–∏–Ω–Ω–µ—Ä —Å–ª–µ–≤–∞ –≤–Ω—É—Ç—Ä–∏ –∫–Ω–æ–ø–∫–∏ */
    #confirmConsult:is(:disabled, [aria-busy="true"])::before {
      content: "";
      position: absolute;
      top: 50%;
      left: 14px;
      width: 16px;
      height: 16px;
      border: 2px solid rgba(255, 255, 255, .8);
      border-right-color: transparent;
      border-radius: 50%;
      transform: translateY(-50%);
      animation: btn-spin .8s linear infinite;
    }

    /* –¢–µ–∫—Å—Ç –≤–º–µ—Å—Ç–æ —Å–∫—Ä—ã—Ç–æ–≥–æ –ª–µ–π–±–ª–∞ */
    #confirmConsult:is(:disabled, [aria-busy="true"])::after {
      content: "–û—Ç–ø—Ä–∞–≤–ª—è—é‚Ä¶";
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      white-space: nowrap;
      color: #fff;
      /* –≤–∏–¥–∏–º—ã–π —Ç–µ–∫—Å—Ç */
      font-weight: 700;
    }

    @keyframes btn-spin {
      to {
        transform: translateY(-50%) rotate(360deg);
      }
    }
  </style>

  <style>
    /* ===== BONUSES (—á–∏—Å—Ç–∞—è –≤–µ—Ä—Å–∏—è) ===== */

    /* –û—Ç—Å—Ç—É–ø—ã –º–µ–∂–¥—É –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ –≤ —Ä–∞–∑–¥–µ–ª–µ */
    #bonuses>.card {
      margin-top: 14px;
    }

    #bonuses>.card:first-child {
      margin-top: 0;
    }

    /* –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–∞—Ä—Ç–æ—á–∫–∏ */
    #bonuses .bonus-card {
      padding: 14px;
      overflow: hidden;
    }

    #bonuses .bonus-card .h2 {
      margin: 0 0 8px;
      font-weight: 800;
    }

    /* –•–µ–¥–µ—Ä: —Å–ª–µ–≤–∞ –ø–ª–∞—à–∫–∞ —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º –±–æ–Ω—É—Å–æ–º */
    .bonus-head {
      display: flex;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
      margin: 0 0 10px;
    }

    .picked-pill {
      display: flex;
      align-items: center;
      gap: 10px;
      min-height: 40px;
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid var(--border, rgba(255, 255, 255, .12));
      background: rgba(255, 255, 255, .04);
      font-weight: 700;
    }

    .picked-pill img {
      width: 28px;
      height: 28px;
      border-radius: 8px;
      object-fit: cover;
      display: block;
    }

    .picked-pill.muted {
      opacity: .7;
      font-weight: 600;
      background: linear-gradient(135deg, rgba(61, 224, 197, .12), rgba(123, 91, 255, .16));
    }

    /* –ö–æ–ª–µ—Å–æ ‚Äî —É—Å—Ç–æ–π—á–∏–≤–æ–µ, —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –≤—ã—Å–æ—Ç—ã */
    .bonus-wheel {
      position: relative;
      height: 180px;
      /* —Ñ–∏–∫—Å –≤—ã—Å–æ—Ç–∞ ‚Äî –Ω–µ –ø–æ—è–≤–∏—Ç—Å—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ */
      overflow: hidden;
      border-radius: 14px;
      background: linear-gradient(180deg, rgba(255, 255, 255, .02), rgba(255, 255, 255, 0) 60%);
      margin-top: 6px;
    }

    .bonus-wheel .wheel-track {
      position: relative;
      width: 100%;
      height: 100%;
      touch-action: pan-x;
      user-select: none;
      cursor: grab;
    }

    .bonus-card.dragging .wheel-track {
      cursor: grabbing;
    }

    /* –ö–∞—Ä—Ç–æ—á–∫–∞ –±–æ–Ω—É—Å–∞ */
    .bonus-wheel .bonus {
      all: unset;
      position: absolute;
      left: 50%;
      top: 50%;
      width: 96px;
      height: 96px;
      border-radius: 16px;
      overflow: hidden;
      transform: translate(-50%, -50%);
      will-change: transform;
      transition: transform .25s ease, filter .25s ease, opacity .25s ease, box-shadow .25s ease;
    }

    .bonus-wheel .bonus img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .bonus-wheel .bonus span {
      position: absolute;
      left: 50%;
      bottom: -22px;
      transform: translateX(-50%);
      font-size: 12px;
      opacity: .85;
      white-space: nowrap;
      pointer-events: none;
    }

    .bonus-wheel .bonus:not(.active) {
      filter: grayscale(.18) brightness(.95);
      opacity: .9;
    }

    .bonus-wheel .bonus.active {
      box-shadow:
        0 0 0 2px rgba(123, 91, 255, .55) inset,
        0 10px 28px rgba(123, 91, 255, .35),
        0 0 22px rgba(61, 224, 197, .25);
    }

    /* –ú—è–≥–∫–∞—è –ø–æ–¥—Å–≤–µ—Ç–∫–∞ —Ü–µ–Ω—Ç—Ä–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) */
    .bonus-wheel .wheel-center {
      pointer-events: none;
      position: absolute;
      inset: 0;
      background: radial-gradient(ellipse at center, rgba(123, 91, 255, .10), transparent 55%);
      mask: linear-gradient(#000 30%, transparent 80%);
    }

    /* –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å –¥–µ–π—Å—Ç–≤–∏–π: –ö—Ä—É—Ç–∞–Ω—É—Ç—å + –ó–∞–±—Ä–∞—Ç—å + —Å—Ç–∞—Ç—É—Å */
    .bonus-card .actions {
      margin-top: 10px;
      display: grid;
      grid-template-columns: 1fr 1fr auto;
      gap: 8px;
      align-items: center;
    }

    #spinBtn,
    #claimBtn {
      min-height: 40px;
    }

    #claimBtn[disabled] {
      opacity: .6;
      pointer-events: none;
    }

    #picked {
      opacity: .8;
    }

    /* –•–µ–¥–µ—Ä —Å–≤–µ—Ä—Ö—É ‚Äî —Ç–æ–ª—å–∫–æ –ø–ª–∞—à–∫–∞ */
    .bonus-head {
      display: flex;
      gap: 12px;
      margin: 0 0 10px;
    }

    .picked-pill {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid var(--border, rgba(255, 255, 255, .12));
      background: rgba(255, 255, 255, .04);
      font-weight: 700;
    }

    .picked-pill.muted {
      opacity: .7;
      font-weight: 600;
    }

    /* –ù–∏–∑: –¥–≤–µ –∫–Ω–æ–ø–∫–∏ —Ä—è–¥–æ–º + —Å—Ç–∞—Ç—É—Å */
    .bonus-card .actions {
      margin-top: 10px;
      display: grid;
      grid-template-columns: 1fr 1fr auto;
      /* [–ö—Ä—É—Ç–∞–Ω—É—Ç—å] [–ó–∞–±—Ä–∞—Ç—å] [‚Äî] */
      gap: 8px;
      align-items: center;
    }

    #spinBtn,
    #claimBtn {
      min-height: 40px;
    }

    #claimBtn[disabled] {
      opacity: .6;
      pointer-events: none;
    }

    #picked {
      opacity: .8;
    }
  </style>
  <style>
    /* –ù–∏–∑: –¥–≤–µ –∫–Ω–æ–ø–∫–∏ –≤ —Ä—è–¥ */
    #bonuses .bonus-card .actions {
      margin-top: 10px;
      display: grid;
      grid-template-columns: 1fr 1fr;
      /* [–ö—Ä—É—Ç–∞–Ω—É—Ç—å] [–ó–∞–±—Ä–∞—Ç—å] */
      gap: 8px;
      align-items: center;
    }

    #bonuses #claimBtn[disabled] {
      opacity: .6;
      pointer-events: none;
    }

    /* –∫–æ–≥–¥–∞ –Ω–µ–ª—å–∑—è –∂–∞—Ç—å */
    #bonuses #claimBtn[disabled] {
      opacity: .55;
      cursor: not-allowed;
      background: rgba(255, 255, 255, .06) !important;
      border: 1px dashed rgba(255, 255, 255, .18) !important;
      color: rgba(255, 255, 255, .60) !important;
      box-shadow: none !important;
      filter: grayscale(.35) saturate(.75) brightness(.95);
    }

    /* –∞–∫—Ç–∏–≤–Ω–∞—è ‚Äî –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π –≤–∏–¥, –º–æ–∂–Ω–æ —É—Å–∏–ª–∏—Ç—å hover */
    #bonuses #claimBtn:not([disabled]):hover {
      transform: translateY(-1px);
    }

    #bonuses #claimBtn:not([disabled]):active {
      transform: translateY(0);
      filter: brightness(.95);
    }


    /* –ö–æ–Ω—Ñ–µ—Ç—Ç–∏ */
    #confetti {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 9998;
      overflow: hidden;
    }

    .confetti-piece {
      position: absolute;
      width: 10px;
      height: 14px;
      border-radius: 2px;
      animation: confetti-fall 900ms linear forwards;
    }

    @keyframes confetti-fall {
      0% {
        opacity: 1;
        transform: translate(var(--x), var(--y)) rotate(0deg);
      }

      100% {
        opacity: 0;
        transform: translate(calc(var(--x) + var(--dx)), calc(var(--y) + var(--dy))) rotate(360deg);
      }
    }

    #bonuses #claimBtn[disabled] {
      opacity: .55;
      cursor: not-allowed;
      background: rgba(255, 255, 255, .06) !important;
      border: 1px dashed rgba(255, 255, 255, .18) !important;
      color: rgba(255, 255, 255, .75) !important;
      box-shadow: none !important;
    }
  </style>

  <style>
    /* ===== –ü–∞—Ä—Ç–Ω—ë—Ä–∫–∞ ‚Äî —Ñ–∏–∫—Å –≤—ë—Ä—Å—Ç–∫–∏ ===== */

    /* –û—Ç–¥–µ–ª—å–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –≤–Ω—É—Ç—Ä–∏ —Ä–∞–∑–¥–µ–ª–∞ ‚Äî –Ω–µ —Å–ª–∏–ø–∞—é—Ç—Å—è */
    #invite>.card {
      margin-top: 14px;
    }

    #invite>.card:first-child {
      margin-top: 0;
    }

    /* –°–µ—Ç–∫–∞ –∏–∑ –¥–≤—É—Ö –∫–∞—Ä—Ç–æ—á–µ–∫ */
    #invite .ref-grid {
      display: grid;
      gap: 14px;
      position: relative;
      isolation: isolate;
      /* —Ä–µ–∂–µ–º –≤–Ω–µ—à–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç—ã */
    }

    @media (min-width:880px) {
      #invite .ref-grid {
        grid-template-columns: minmax(0, 1.2fr) minmax(0, .8fr);
      }
    }

    /* –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏: —É–±–∏—Ä–∞–µ–º ¬´–Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–Ω—ã–µ¬ª –æ—Ç—Å—Ç—É–ø—ã/–æ–≤–µ—Ä–ª–µ–∏ */
    #invite .ref-grid .card {
      margin: 0;
      padding: 14px;
      overflow: hidden;
      position: relative;
    }

    /* –†—è–¥ —Å–æ —Å—Å—ã–ª–∫–æ–π –∏ –∫–Ω–æ–ø–∫–∞–º–∏ */
    #invite .ref-row {
      display: grid;
      gap: 8px;
      margin-top: 8px;
      align-items: center;
      grid-template-columns: 1fr auto auto;
      /* input | copy | share */
    }

    @media (max-width:520px) {
      #invite .ref-row {
        grid-template-columns: 1fr;
      }

      /* –≤—Å—ë –≤ —Å—Ç–æ–ª–±–∏–∫ –Ω–∞ —É–∑–∫–∏—Ö */
    }

    #invite .ref-input {
      min-height: 40px;
      border-radius: 12px;
      padding: 8px 12px;
      font-weight: 700;
      border: 1px solid var(--border, rgba(255, 255, 255, .14));
      background: rgba(255, 255, 255, .04);
      color: inherit;
      width: 100%;
    }

    /* –ë–∞–Ω–Ω–µ—Ä-–ø–æ—è—Å–Ω–µ–Ω–∏–µ */
    #invite .ref-banner {
      margin-top: 10px;
      padding: 12px;
      border-radius: 14px;
      text-align: center;
      font-weight: 800;
      background: linear-gradient(135deg, rgba(61, 224, 197, .12), rgba(123, 91, 255, .16));
      border: 1px solid rgba(255, 255, 255, .10);
    }

    /* –ù–∏–∂–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è */
    #invite .ref-actions {
      margin-top: 10px;
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    /* –õ–∏–¥–µ—Ä—ã */
    #invite .lead-list {
      list-style: none;
      padding: 0;
      margin: 10px 0 0;
      display: grid;
      gap: 8px;
    }

    #invite .lead-list li {
      display: grid;
      grid-template-columns: 1fr auto;
      align-items: center;
      padding: 8px 10px;
      border-radius: 12px;
      border: 1px solid var(--border, rgba(255, 255, 255, .10));
      background: rgba(255, 255, 255, .04);
      font-weight: 700;
    }

    #invite .lead-list .me {
      box-shadow: inset 0 0 0 2px rgba(123, 91, 255, .35);
    }

    /* –ú–µ–ª–∫–∞—è –∫–æ—Å–º–µ—Ç–∏–∫–∞ */
    #invite #copyRef.copied {
      filter: brightness(1.1);
    }

    /* –ü–∞—Ä—Ç–Ω—ë—Ä–∫–∞: –∑–∞–∑–æ—Ä –º–µ–∂–¥—É –∑–∞–≥–æ–ª–æ–≤–∫–æ–º –∏ —Å–µ—Ç–∫–æ–π –∫–∞—Ä—Ç–æ—á–µ–∫ */
    #invite .page-title+.ref-grid {
      margin-top: 14px;
    }

    /* –∏–º–µ–Ω–Ω–æ –º–µ–∂–¥—É –Ω–∏–º–∏ */
  </style>

  <style>
    /* ===== –¢–∞—Ä–∏—Ñ—ã / –£—Å–ª—É–≥–∏ ===== */

    /* –∑–∞–∑–æ—Ä –º–µ–∂–¥—É –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ –≤ —Ä–∞–∑–¥–µ–ª–µ */
    #services>.card {
      margin-top: 14px;
    }

    #services>.card:first-child {
      margin-top: 0;
    }

    /* –∫–∞—Ä—Ç–æ—á–∫–∞-–∑–∞–≥–æ–ª–æ–≤–æ–∫ + —Å–µ—Ç–∫–∞ ‚Äî –Ω–µ —Å–ª–∏–ø–∞—é—Ç—Å—è */
    #services .page-title+.service-grid {
      margin-top: 14px;
    }

    /* –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –ø–ª–∞–Ω–∞ */
    #services .plan-toggle {
      display: flex;
      gap: 8px;
      margin-top: 10px;
      flex-wrap: wrap;
    }

    #services .plan-toggle .plan-btn {
      padding: 8px 12px;
      border-radius: 12px;
      font-weight: 800;
      border: 1px solid var(--border, rgba(255, 255, 255, .14));
      background: rgba(187, 184, 184, 0.04);
    }

    #services .plan-toggle .plan-btn.active {
      background: linear-gradient(135deg, var(--mint, #3de0c5), var(--primary, #7b5bff));
      color: #f8fafb;
      border-color: transparent;
    }

    /* —Å–µ—Ç–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫ */
    #services .service-grid {
      display: grid;
      gap: 14px;
    }

    @media (min-width:900px) {
      #services .service-grid {
        grid-template-columns: 1fr 1fr;
      }
    }

    #services .service-grid .card {
      margin: 0;
      padding: 14px;
    }

    /* —Ü–µ–Ω–∞ –≤–Ω—É—Ç—Ä–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ */
    #services .price-row {
      display: flex;
      gap: 10px;
      align-items: baseline;
      margin-top: 8px;
    }

    #services .price .num {
      font-size: 26px;
      font-weight: 900;
      letter-spacing: .3px;
    }

    #services .price-note {
      opacity: .8;
    }

    /* –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –≤ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ —Ç–∞—Ä–∏—Ñ–æ–≤ */
    #services .plan-toggle .plan-btn {
      color: rgba(142, 131, 131, 0.78);
      /* –ù–ï–∞–∫—Ç–∏–≤–Ω–∞—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
    }

    #services .plan-toggle .plan-btn.active {
      color: #f6f7f8;
      /* –ê–∫—Ç–∏–≤–Ω–∞—è (–Ω–∞ –≥—Ä–∞–¥–∏–µ–Ω—Ç–µ) */
    }

    #services .plan-toggle .plan-btn:not(.active):hover {
      color: #ffffff;
      /* –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –ø—Ä–∏ —Ö–æ–≤–µ—Ä–µ */
    }
  </style>

  <style>
    /* === About: —Ä–∞–∑–ª–∏–ø–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫ === */
    #about>.card {
      margin-top: 14px;
    }

    #about>.card:first-child {
      margin-top: 0;
    }

    #about .page-title+.about-chat {
      margin-top: 14px;
    }

    /* === –ú–∏–Ω–∏-—á–∞—Ç === */
    #about .about-chat {
      padding: 14px;
      display: grid;
      gap: 10px;
    }

    #about .chat-window {
      height: 380px;
      overflow: auto;
      padding: 10px;
      border-radius: 14px;
      border: 1px solid #0f1318, rgba(12, 12, 12, 0.029));
      background: linear-gradient(180deg, rgba(255, 255, 255, .03), rgba(255, 255, 255, .02));
      scroll-behavior: smooth;
    }

    /* –°–æ–æ–±—â–µ–Ω–∏—è */
    #about .msg {
      display: flex;
      gap: 10px;
      margin: 10px 0;
      align-items: flex-end;
    }

    #about .msg.user {
      flex-direction: row-reverse;
    }

    /* –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–ø—Ä–∞–≤–∞ */

    /* –ê–≤–∞—Ç–∞—Ä—ã —á–µ—Ä–µ–∑ IMG (–Ω–∏–∫–∞–∫–∏—Ö background) */
    #about .avatar {
      width: 34px;
      height: 34px;
      border-radius: 50%;
      flex: 0 0 34px;
      border: 1px solid rgba(255, 255, 255, .18);
      object-fit: cover;
      background: #222;
    }

    /* –ü—É–∑—ã—Ä–∏ */
    #about .bubble {
      max-width: 75%;
      padding: 10px 12px;
      border-radius: 14px;
      line-height: 1.25;
      border: 1px solid var(--border, rgba(255, 255, 255, .12));
      background: rgba(255, 255, 255, .05);
      font-weight: 10;
    }

    #about .msg.me .bubble {
      background: linear-gradient(135deg, rgba(61, 224, 197, .12), rgba(123, 91, 255, .16));
      color: #fafafa;
      border-color: transparent;
      font-weight: 10;
    }

    /* –¢–∞–π–ø–∏–Ω–≥ */
    #about .typing {
      width: 60px;
      display: flex;
      justify-content: space-between;
    }

    #about .dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: currentColor;
      opacity: .7;
      animation: typing 1s infinite ease-in-out;
    }

    #about .dot:nth-child(2) {
      animation-delay: .15s
    }

    #about .dot:nth-child(3) {
      animation-delay: .3s
    }

    @keyframes typing {

      0%,
      100% {
        transform: translateY(0)
      }

      50% {
        transform: translateY(-3px)
      }
    }

    /* –ë—ã—Å—Ç—Ä—ã–µ –∫–Ω–æ–ø–∫–∏ */
    #about .chat-quick {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    #about .chip {
      appearance: none;
      border: 1px solid var(--border);
      background: #141a21;
      color: var(--text);
      padding: 10px 12px;
      border-radius: 14px;
      cursor: pointer;
      transition: .18s
    }

    #about .chip:disabled {
      opacity: .55;
      pointer-events: none;
    }
  </style>

  <style>

/* ===== –£–°–õ–£–ì–ò: –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –ø–ª–∞–Ω–∞ ===== */
#services .plan-toggle{ display:flex; gap:10px; margin-top:10px; flex-wrap:wrap; }
#services .plan-btn{
  padding:8px 14px; border-radius:14px; font-weight:800;
  border:1px solid rgba(255,255,255,.14); background:rgba(255,255,255,.05);
}
#services .plan-btn.active{
  background:linear-gradient(135deg,#3de0c5,#7b5bff); color:#0b0f12; border-color:transparent;
}

/* ===== –£–°–õ–£–ì–ò: –æ–∫–Ω–æ –∫–∞—Ä—É—Å–µ–ª–∏ (–±–µ–∑ –º–∞—Å–∫–∏ –∏ ¬´–ø–æ–¥–≤–∞–ª–∞¬ª) ===== */
#services .tariff-wheel{
  position:relative; overflow:hidden;
  padding:0 12px;              /* –±–æ–∫–æ–≤—ã–µ –ø–æ–ª—è; –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã—Ö –Ω–µ—Ç */
  border-radius:16px;
  touch-action:none; overscroll-behavior:contain;
}
#services .wheel-center-mask,
#services .tariff-wheel::before,
#services .tariff-wheel::after{ display:none !important; }

#services .page-title + .tariff-wheel{ margin-top:14px; }

/* —Å–ø–∏—Å–æ–∫ */
#services .wheel-list{ display:flex; flex-direction:column; row-gap:12px; }

/* –∫–∞—Ä—Ç–æ—á–∫–∞ —Ç–∞—Ä–∏—Ñ–∞ */
#services .wheel-list .tariff{
  position:relative; overflow:hidden; border-radius:16px;
  transform-origin:center;
  transition:transform .22s ease, box-shadow .22s ease, border-color .22s ease;
}

/* –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –Ω–µ–æ–Ω–æ–≤–∞—è –ø–æ–¥—Å–≤–µ—Ç–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–π */
:root{ --acc1:#7c5bff83; --acc2:#050505; }
#services .wheel-list .tariff.active{
  transform:scale(1.07);
  border-color:#f1f4f43a;
  background: linear-gradient(135deg, rgba(61, 224, 197, .12), rgba(123, 91, 255, .16));
}
#services .wheel-list .tariff.active::after{
  content:""; position:absolute; inset:0; pointer-events:none; z-index:0;
  clip-path: inset(6px round 16px);
  filter:blur(10px); opacity:.9;
  background: #60cdbd00;
}

/* —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤–Ω—É—Ç—Ä–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ */
#services .service-card{ min-height:140px; } /* –∞–Ω—Ç–∏-–¥—ë—Ä–≥–∞–Ω—å–µ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º —Ä–µ–Ω–¥–µ—Ä–µ */
#services .price-row{ display:flex; gap:10px; align-items:baseline; margin-top:8px; }
#services .price .num{ font-size:26px; font-weight:900; letter-spacing:.3px; }
#services .price-note{ opacity:.85; }

/* –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: —à–∏—Ä–∏–Ω–∞ –∫–∞—Ä—Ç–æ—á–µ–∫ */
#services .wheel-list .tariff{ width:100%; }

/* === BASE (–º–æ–±–∏–ª—å–Ω—ã–π) ‚Äî —É —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å, –æ—Å—Ç–∞–≤–ª—è—é –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ === */
#services .tariff-wheel{
  --gap:12px;
  position:relative; overflow:hidden;
  padding:0 12px; border-radius:16px;
  touch-action:none; overscroll-behavior:contain;
  height:auto; /* –≤—ã—Å–æ—Ç—É —Å—Ç–∞–≤–∏—Ç JS */
}
#services .wheel-center-mask,
#services .tariff-wheel::before,
#services .tariff-wheel::after{ display:none !important; }

#services .wheel-list{ display:flex; flex-direction:column; gap:var(--gap); }
#services .wheel-list .tariff{
  width:100%; border-radius:16px;
  background:rgba(255,255,255,.03);
  border:1px solid rgba(255,255,255,.12);
  transition: transform .22s ease, box-shadow .22s ease, border-color .22s ease;
}
#services .service-card{ padding:16px; }
#services .service-card .h2{ font-size:18px; font-weight:900; margin:0 0 8px; }
#services .service-card .muted-sm{ opacity:.8; margin:0 0 10px; }
#services .price-row{ display:flex; gap:10px; align-items:baseline; margin-top:6px; }
#services .price .num{ font-size:26px; font-weight:900; letter-spacing:.3px; }

/* === ‚â•600px ‚Äî –±–æ–ª—å—à–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω—ã / –∫–æ–º–ø–∞–∫—Ç–Ω—ã–µ –ø–ª–∞–Ω—à–µ—Ç—ã === */
@media (min-width:600px){
  #services .tariff-wheel{ padding:0 16px; }
  #services .wheel-list{ gap:14px; }
  #services .wheel-list .tariff{ border-radius:18px; }
  #services .service-card{ padding:18px; }
  #services .service-card .h2{ font-size:19px; }
  #services .price .num{ font-size:28px; }
}

/* === ‚â•768px ‚Äî –ø–ª–∞–Ω—à–µ—Ç (–ø–æ—Ä—Ç—Ä–µ—Ç/–∞–ª—å–±–æ–º) === */
@media (min-width:768px){
  #services .tariff-wheel{ padding:0 18px; }
  #services .wheel-list .tariff{ max-width:640px; margin-inline:auto; }
  #services .service-card{ padding:20px; }
  #services .service-card .h2{ font-size:20px; }
  #services .price .num{ font-size:32px; }
  /* —á—É—Ç—å –≤—ã—Ä–∞–∑–∏—Ç–µ–ª—å–Ω–µ–µ –∞–∫—Ç–∏–≤–Ω–∞—è */
  #services .wheel-list .tariff.active{ transform:scale(1.01); }
}

/* === ‚â•1024px ‚Äî –Ω–æ—É—Ç–±—É–∫–∏ / –¥–µ—Å–∫—Ç–æ–ø === */
@media (min-width:1024px){
  #services .page-title{ margin-bottom:16px; }
  #services .plan-toggle{ justify-content:center; }
  #services .tariff-wheel{ padding:0 24px; }
  #services .wheel-list .tariff{ max-width:880px; }
  #services .service-card{ padding:22px; }
  #services .service-card .h2{ font-size:22px; }
  #services .price .num{ font-size:36px; }
}

/* === ‚â•1280px ‚Äî —à–∏—Ä–æ–∫–∏–µ —ç–∫—Ä–∞–Ω—ã === */
@media (min-width:1280px){
  #services .tariff-wheel{ padding:0 28px; }
  #services .wheel-list .tariff{ max-width:980px; }
  #services .service-card{ padding:24px; }
  #services .service-card .h2{ font-size:24px; }
  #services .price .num{ font-size:40px; }
}

/* === (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) —Å–µ—Ç–∫–∞ –≤–º–µ—Å—Ç–æ –∫–∞—Ä—É—Å–µ–ª–∏ –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ
   –î–æ–±–∞–≤—å JS-–∫–ª–∞—Å—Å .is-desktop –Ω–∞ .tariff-wheel ‚Äî –∏ –≤–∫–ª—é—á–∏—Ç—Å—è —ç—Ç–∞ —Å–µ—Ç–∫–∞ */
#services .tariff-wheel.is-desktop{
  height:auto; overflow:visible; padding:0 24px;
}
#services .tariff-wheel.is-desktop .wheel-list{
  display:grid; grid-template-columns:repeat(2, minmax(0,1fr)); gap:16px;
}
#services .tariff-wheel.is-desktop .tariff{
  max-width:none; transform:none; box-shadow:none;
}
#services .tariff-wheel.is-desktop .tariff.active::after{ content:none; }

/* –ù–∞ –¥–µ—Å–∫—Ç–æ–ø–µ —Ä–∞–∑—Ä–µ—à–∏–º –Ω–∞—Ç–∏–≤–Ω–æ–µ ¬´pan-y¬ª, —á—Ç–æ–±—ã —Ç–∞—á–ø–∞–¥ –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞–ª */
@media (hover:hover) and (pointer:fine){
  #services .tariff-wheel{ touch-action: pan-y; }
  #services .wheel-list .tariff{ cursor: grab; }
  #services .wheel-list .tariff:active{ cursor: grabbing; }
}
</style>


 <style>
/* ===== –ë–û–ù–£–°–´: –ø–æ–ª–Ω—ã–π —Å—Ç–∏–ª—å (mobile-first) ===== */

/* –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ—Ç—Å—Ç—É–ø–æ–≤ –∏ —Ä–∞–∑–º–µ—Ä–æ–≤ */
:root{
  --bon-space-m: 16px;   /* –≤–Ω–µ—à–Ω–∏–π –æ—Ç—Å—Ç—É–ø —Å–µ–∫—Ü–∏–∏ —Å–≤–µ—Ä—Ö—É/—Å–Ω–∏–∑—É –Ω–∞ –º–æ–±–∏–ª–µ */
  --bon-space-d: 24px;   /* –≤–Ω–µ—à–Ω–∏–π –æ—Ç—Å—Ç—É–ø —Å–µ–∫—Ü–∏–∏ —Å–≤–µ—Ä—Ö—É/—Å–Ω–∏–∑—É –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ */
  --bon-gap-m:   12px;   /* —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ –Ω–∞ –º–æ–±–∏–ª–µ */
  --bon-gap-d:   16px;   /* —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ */
  --bon-thumb:   clamp(84px, 26vw, 120px); /* —Ä–∞–∑–º–µ—Ä –ø—Ä–µ–≤—å—é –Ω–∞ –º–æ–±–∏–ª–µ */
}

/* –í–ù–ï–®–ù–ò–ï –æ—Ç—Å—Ç—É–ø—ã —Å–µ–∫—Ü–∏–∏ –æ—Ç —Å–æ—Å–µ–¥–Ω–∏—Ö –±–ª–æ–∫–æ–≤ */
#bonuses{
  margin-block: var(--bon-space-m);
}

/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ –≤–Ω—É—Ç—Ä–∏ —Å–µ–∫—Ü–∏–∏ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å .page-title) */
#bonuses > .page-title,
#bonuses > .card.page-title{
  margin-bottom: var(--bon-gap-m);
}

/* –°–ø–∏—Å–æ–∫ –∫–∞—Ä—Ç–æ—á–µ–∫: –º–æ–±–∏–ª—å–Ω–∞—è –∫–æ–ª–æ–Ω–∫–∞ */
#bonuses .bonuses-grid{
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--bon-gap-m);             /* —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ */
}

/* –ö–∞—Ä—Ç–æ—á–∫–∞ –±–æ–Ω—É—Å–∞ */
#bonuses .bonuses-grid .bonus-item{
  display:flex; gap:12px; align-items:center;
  padding:12px;
  border-radius:16px;
  border:1px solid var(--border, rgba(255,255,255,.12));
  background: rgba(255,255,255,.03);
  margin:0;                          /* –≤–∞–∂–Ω.: –æ—Ç—Å—Ç—É–ø—ã —É–ø—Ä–∞–≤–ª—è–µ—Ç grid gap */
  position:relative;
}

/* –ü—Ä–µ–≤—å—é —Å–ª–µ–≤–∞ ‚Äî —Å—Ç–∞–±–∏–ª—å–Ω–æ–µ: –∫–≤–∞–¥—Ä–∞—Ç */
#bonuses .bonuses-grid .bonus-item .pic{
  width: var(--bon-thumb);
  aspect-ratio: 1 / 1;               /* —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ñ–æ—Ä–º–∞ ‚Äî –±–µ–∑ –ø—Ä—ã–∂–∫–æ–≤ –≤–µ—Ä—Å—Ç–∫–∏ */
  border-radius:14px;
  overflow:hidden;
  background: rgba(255,255,255,.06);
  flex:0 0 auto;
  display:grid; place-items:center;
  position:relative;
}
#bonuses .bonuses-grid .bonus-item .pic img{
  width:100%; height:100%;
  object-fit:cover; display:block;
}

/* –¢—ë–º–Ω—ã–π —Ñ–æ–Ω –ø–æ–≤–µ—Ä—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è */
#bonuses .bonuses-grid .bonus-item .pic{
  position: relative; /* —É–∂–µ –µ—Å—Ç—å, –æ—Å—Ç–∞–≤–ª—è–µ–º */
}

/* –±–∞–∑–æ–≤—ã–π –æ–≤–µ—Ä–ª–µ–π (—Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π --pic-dim) */
#bonuses .bonuses-grid .bonus-item .pic::before{
  content:"";
  position:absolute; inset:0;
  background: rgba(0,0,0, var(--pic-dim, .68)); /* 0.68 = 68% –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ */
  pointer-events:none;
  z-index:1;
  border-radius: inherit;
}

/* —É–±–µ–¥–∏–º—Å—è, —á—Ç–æ –∫–∞—Ä—Ç–∏–Ω–∫–∞ –ø–æ–¥ –æ–≤–µ—Ä–ª–µ–µ–º */
#bonuses .bonuses-grid .bonus-item .pic img{
  position:relative; z-index:0;
}

/* –≤–∞—Ä–∏–∞–Ω—Ç—ã –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç–∏ (–ø–æ –∂–µ–ª–∞–Ω–∏—é) */
#bonuses .bonuses-grid .bonus-item .pic.dim-strong{ --pic-dim:.42; }
#bonuses .bonuses-grid .bonus-item .pic.dim-light { --pic-dim:.18; }

/* –≤–º–µ—Å—Ç–æ —Å–ø–ª–æ—à–Ω–æ–≥–æ ‚Äî –º–æ–∂–Ω–æ –≥—Ä–∞–¥–∏–µ–Ω—Ç (—Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π, –µ—Å–ª–∏ —Ö–æ—á–µ—à—å) */
/*
#bonuses .bonuses-grid .bonus-item .pic::before{
  background: linear-gradient(180deg, rgba(0,0,0,.18), rgba(0,0,0,.38));
}
*/


/* –ö–æ–Ω—Ç–µ–Ω—Ç —Å–ø—Ä–∞–≤–∞ */
#bonuses .bonuses-grid .bonus-item .txt{
  flex:1 1 auto; min-width:0;
}
#bonuses .bonuses-grid .bonus-item .txt .h2,
#bonuses .bonuses-grid .bonus-item .txt h3{
  margin:0 0 6px; font-size:18px; font-weight:900;
}
#bonuses .bonuses-grid .bonus-item .txt .muted-sm{
  margin:0 0 10px; opacity:.85;
}

/* –ö–Ω–æ–ø–∫–∏ */
#bonuses .bonuses-grid .bonus-item .btn{
  padding:8px 12px; border-radius:12px; font-weight:800;
  border:1px solid var(--border, rgba(255,255,255,.12));
  background: rgba(255,255,255,.05);
}
#bonuses .bonuses-grid .bonus-item .btn.btn-primary{
  background: linear-gradient(135deg, var(--mint,#3de0c5), var(--primary,#7b5bff));
  color:#0b0f12; border-color: transparent;
}

/* –°–∫–µ–ª–µ—Ç–æ–Ω-–ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä –¥–æ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å JS-—Å–∫–µ–ª–µ—Ç–æ–Ω) */
#bonuses .bonuses-grid .bonus-item .pic.loading::after{
  content:""; position:absolute; inset:0;
  background:
    linear-gradient(90deg,
      rgba(255,255,255,.06) 0%,
      rgba(255,255,255,.12) 38%,
      rgba(255,255,255,.06) 72%);
  animation: bon-shimmer 1.1s linear infinite;
}
@keyframes bon-shimmer{
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}


 </style>

  <style>
    /* —Å–æ—Å—Ç–æ—è–Ω–∏—è —à–∞–≥–æ–≤ –∫–∞–∫ –º—ã —Ä–∞–±–æ—Ç–∞–µ–º*/
/*#flow .badge.is-current{ outline:2px solid rgba(123,91,255,.8); box-shadow:0 0 0 6px rgba(123,91,255,.18) inset; filter:none; opacity:1; } */
#flow .badge.is-done   { opacity:.75; filter:none; }
#flow .badge.is-future { opacity:.0; filter:grayscale(1); pointer-events:none; } /* ¬´—Å–ª–∏–≤–∞–µ—Ç—Å—è¬ª —Å —Ñ–æ–Ω–æ–º */

  </style>


</head>

<body>
  <div class="wrap">
    <header>
      <div class="brand-wrap">
        <div class="logo" aria-label="logo"></div>
        <div>
          <div class="brand">Sales Genius</div>
          <div class="slogan" style="color:var(--muted);font-size:13px">–°—á–∏—Ç–∞–µ–º –ø—Ä–∏–±—ã–ª—å, –∞ –Ω–µ –∫–ª–∏–∫–∏</div>
        </div>
      </div>
    </header>

    <nav id="spa-nav">
      <div class="track">
        <a class="btn active" data-page="home" href="#home">üè† –ì–ª–∞–≤–Ω–∞—è</a>
        <a class="btn" data-page="services" href="#services">üß© –£—Å–ª—É–≥–∏</a>
        <a class="btn" data-page="about" href="#about">‚ÅâÔ∏è –í–æ–ø—Ä–æ—Å—ã</a>
        <a class="btn" data-page="bonuses" href="#bonuses">üéÅ –ë–æ–Ω—É—Å—ã</a>
        <!-- <a class="btn" data-page="history" href="#history">üìã –ò—Å—Ç–æ—Ä–∏—è</a> -->
        <a class="btn" data-page="consult" href="#consult">üìÖ –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è</a>
        <a class="btn" data-page="invite" href="#invite">üéØ –ü–∞—Ä—Ç–Ω—ë—Ä–∫–∞</a>
        <span class="bubble" aria-hidden="true"></span>
      </div>
    </nav>

    <main>
      <!-- HOME -->
      <section class="page" id="home">
        <div class="card page-title">
          <h2 class="h1">–ì–ª–∞–≤–Ω–∞—è</h2>
          <p class="muted-sm">–°—Ç—Ä–æ–∏–º —Å–∏—Å—Ç–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–≤—Ä–∞—â–∞—é—Ç —Ä–µ–∫–ª–∞–º—É –≤ –¥–µ–Ω—å–≥–∏ –Ω–∞ –≤–∞—à–µ–º —Å—á—ë—Ç–µ.</p>
        </div>

        <!-- –í–°–ï –ù–ò–ñ–ï ‚Äî –í–ù–£–¢–†–ò #home -->
        <div class="grid grid-2" style="margin-top:14px">
          <!-- –ë—ã—Å—Ç—Ä—ã–π —Ä–∞—Å—á–µ—Ç –ø—Ä–∏–±—ã–ª–∏ –±–∏–∑–Ω–µ—Å–∞ -->
          <div class="card savings">
            <div class="h1">–°–∫–æ–ª—å–∫–æ –¥–µ–Ω–µ–≥<span> —Ç—ã —Ç–µ—Ä—è–µ—à—å</span> –µ–∂–µ–≥–æ–¥–Ω–æ</div>

            <div class="row">
              <label>–ü—Ä–∏–±—ã–ª—å —Å–µ–π—á–∞—Å: <strong id="revVal">10 000 000 ‚ÇΩ</strong></label>
              <input id="rev" type="range" min="500000" max="50000000" step="500000" value="10000000">
            </div>

            <div class="row">
              <label>–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–∞: <strong id="pctVal">12%</strong></label>
              <input id="pct" type="range" min="1" max="30" step="1" value="12">
            </div>

            <!-- –î–≤–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ä–∞–º–∫–∏ -->
            <div class="stat-chips equal">
              <div class="chip">
                <span class="label">–î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:</span>
                <span id="oldTax">1 500 000 ‚ÇΩ</span>
              </div>
              <div class="chip">
                <span class="label">–ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:</span>
                <span id="newTax">1 320 000 ‚ÇΩ</span>
              </div>
            </div>


            <div>–ü—Ä–∏–±—ã–ª—å, –∫–æ—Ç–æ—Ä—É—é —Ç—ã —Ç–µ—Ä—è–µ—à—å::</div>
            <div class="big" id="saveCounter">0 ‚ÇΩ</div>

            <div class="cta">
              <button class="btn btn-primary confetti" id="ctaCalc">–í–µ—Ä–Ω—É—Ç—å –Ω–µ–¥–æ–ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–µ–Ω—å–≥–∏</button>
            </div>
          </div>

                  <!-- –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ -->
        <div class="card">
          <div class="h1" style="margin-bottom:20px">–ß—Ç–æ <span>–¥–µ–ª–∞—Ç—å</span> –¥–∞–ª—å—à–µ</div>
          <ul class="list">
            <li><span class="dot"></span>–ó–∞–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –±–µ—Å–ø–ª–∞—Ç–Ω—É—é –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é –∏ –ø–æ–ª—É—á–∏—Ç–µ –ø–µ—Ä–≤—ã–µ –∏–Ω—Å–∞–π—Ç—ã</li>
            <li><span class="dot"></span>–ó–∞–±–µ—Ä–∏—Ç–µ –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏–º–µ–Ω–Ω–æ –¥–ª—è –≤–∞—à–µ–≥–æ –±–∏–∑–Ω–µ—Å–∞</li>
            <li><span class="dot"></span>–í–Ω–µ–¥—Ä—è–π—Ç–µ —à–∞–≥–∏ –∏ —Å–º–æ—Ç—Ä–∏—Ç–µ, –∫–∞–∫ –ø—Ä–∏–±—ã–ª—å —Ä–∞—Å—Ç—ë—Ç –Ω–∞ –≥–ª–∞–∑–∞—Ö</li>
          </ul>
          <div class="highlight-banner" style="text-align:left">
            <strong>–ë–æ–Ω—É—Å: </strong> –ß–µ–∫-–ª–∏—Å—Ç-–∞—É–¥–∏—Ç –Ω–∞ 61 –ø—É–Ω–∫—Ç ‚Äî –≤—ã—è–≤–∏—Ç–µ –≤—Å–µ –¥—ã—Ä—ã –≤ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–µ
          </div>
        </div>

          <!-- –ö–∞–∫ –º—ã —Ä–∞–±–æ—Ç–∞–µ–º -->
          <div class="card" style="margin-bottom:12px">
            <div class="h1" style="margin-bottom:20px">–ö–∞–∫ <span>–º—ã</span> —Ä–∞–±–æ—Ç–∞–µ–º</div>
            <div id="flow" style="display:grid;gap:8px">
              <div class="badge">–®–∞–≥ 1 ¬∑ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ üîé –†–∞–∑–±–∏—Ä–∞–µ–º –≤–∞—à –º–∞—Ä–∫–µ—Ç–∏–Ω–≥ –ø–æ –ø–æ–ª–æ—á–∫–∞–º</div>
              <div class="badge">–®–∞–≥ 2 ¬∑ –ü–ª–∞–Ω –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ üõ† –ß—ë—Ç–∫–∏–µ —à–∞–≥–∏ –¥–ª—è —Ä–æ—Å—Ç–∞ –ø—Ä–∏–±—ã–ª–∏</div>
              <div class="badge">–®–∞–≥ 3 ¬∑ –í–Ω–µ–¥—Ä–µ–Ω–∏–µ üöÄ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —Ä–µ–∫–ª–∞–º—É, CRM, –±–æ—Ç–æ–≤ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫—É</div>
              <div class="badge">–®–∞–≥ 4 ¬∑ –ö–æ–Ω—Ç—Ä–æ–ª—å –∏ –æ—Ç—á—ë—Ç—ã üìà –ü—Ä–æ–∑—Ä–∞—á–Ω—ã–µ —Ü–∏—Ñ—Ä—ã, —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –æ—Ç—á—ë—Ç—ã –∏ —Ä–æ—Å—Ç –ø—Ä–æ–¥–∞–∂</div>
            </div>
            <div class="cta" style="margin-top:10px; display:flex; gap:8px; flex-wrap:wrap;">
              <button class="btn btn-primary" id="flowNext">–î–∞–ª—å—à–µ</button>
              <button class="btn btn-ghost" id="flowReset">–°–±—Ä–æ—Å–∏—Ç—å</button>
            </div>
          </div>
        </div>

      </section>



<!-- SERVICES -->
<section class="page" id="services">
  <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ + –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å -->
  <div class="card page-title">
    <h2 class="h1">–¢–∞—Ä–∏—Ñ—ã</h2>
    <div id="planRow" class="plan-toggle">
      <button class="plan-btn active" data-plan="month">–ú–µ—Å—è—Ü</button>
      <button class="plan-btn" data-plan="year">–ì–æ–¥ ‚àí15%</button>
    </div>
  </div>

  <!-- –í–ï–†–¢–ò–ö–ê–õ–¨–ù–ê–Ø –ö–ê–†–£–°–ï–õ–¨ –¢–ê–†–ò–§–û–í -->
  <div class="tariff-wheel" id="tariffWheel">
    <div class="wheel-list" id="tariffList">
      <!-- –ö–ê–ñ–î–´–ô —Ç–∞—Ä–∏—Ñ ‚Äî –û–î–ù–ê –∫–∞—Ä—Ç–æ—á–∫–∞ (–±–µ–∑ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö .card) -->
      <article class="card tariff service-card" data-id="tg"        data-month="20000">
        <div class="h2">–ê—É–¥–∏—Ç + –∫–æ–Ω—Å–∞–ª—Ç–∏–Ω–≥</div>
        <p class="muted-sm">–†–∞–∑–±–æ—Ä –∫–∞–º–ø–∞–Ω–∏–π, –≥–∏–ø–æ—Ç–µ–∑—ã, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏.</p>
        <div class="price-row"><div class="price"><span class="num"></span> ‚ÇΩ</div><div class="price-note"></div></div>
      </article>

            <article class="card tariff service-card" data-id="tg"        data-month="65000">
        <div class="h2">–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø—Ä–æ–¥–∞–∂</div>
        <p class="muted-sm">CRM + –±–æ—Ç—ã + —Å–∫–≤–æ–∑–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ ¬´–ø–æ–¥ –∫–ª—é—á¬ª.</p>
        <div class="price-row"><div class="price"><span class="num"></span> ‚ÇΩ</div><div class="price-note"></div></div>
      </article>

            <article class="card tariff service-card" data-id="tg"        data-month="110000">
        <div class="h2">–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤–æ–µ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ</div>
        <p class="muted-sm">–ö–æ–º–ø–ª–µ–∫—Å: —Ä–µ–∫–ª–∞–º–∞, SMM, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞, CRM.</p>
        <div class="price-row"><div class="price"><span class="num"></span> ‚ÇΩ</div><div class="price-note"></div></div>
      </article>

            <article class="card tariff service-card" data-id="tg"        data-month="40000">
        <div class="h2">YouTube + Shorts</div>
        <p class="muted-sm">–í–∏–¥–µ–æ-–ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ, —Ç—Ä–∞—Ñ–∏–∫ –∏ –ª–∏–¥—ã —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–µ–Ω—Ç.</p>
        <div class="price-row"><div class="price"><span class="num"></span> ‚ÇΩ</div><div class="price-note"></div></div>
      </article>

            <article class="card tariff service-card" data-id="tg"        data-month="49000">
        <div class="h2">–ò–Ω—Ñ–ª—é–µ–Ω—Å-–º–∞—Ä–∫–µ—Ç–∏–Ω–≥</div>
        <p class="muted-sm">–°–ú–ò, –±–ª–æ–≥–µ—Ä—ã, –ª–∏–¥–µ—Ä—ã –º–Ω–µ–Ω–∏–π ‚Äî —Ä–æ—Å—Ç –¥–æ–≤–µ—Ä–∏—è.</p>
        <div class="price-row"><div class="price"><span class="num"></span> ‚ÇΩ</div><div class="price-note"></div></div>
      </article>

                  <article class="card tariff service-card" data-id="tg"        data-month="29000">
        <div class="h2">–†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã</div>
        <p class="muted-sm">–°–∏—Å—Ç–µ–º–∞ ¬´–ø—Ä–∏–≤–µ–¥–∏ –¥—Ä—É–≥–∞¬ª –∏ –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–µ —Å–µ—Ç–∏.</p>
        <div class="price-row"><div class="price"><span class="num"></span> ‚ÇΩ</div><div class="price-note"></div></div>
      </article>

      <article class="card tariff service-card" data-id="avito"     data-month="30000">
        <div class="h2">–ü—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ –Ω–∞ –ê–≤–∏—Ç–æ</div>
        <p class="muted-sm">–ü–µ—Ä–≤—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –ø—Ä–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–º –±—é–¥–∂–µ—Ç–µ.</p>
        <div class="price-row"><div class="price"><span class="num"></span> ‚ÇΩ</div><div class="price-note"></div></div>
      </article>

      <article class="card tariff service-card" data-id="ads"       data-month="60000">
        <div class="h2">–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è —Ä–µ–∫–ª–∞–º–∞</div>
        <p class="muted-sm">–Ø–Ω–¥–µ–∫—Å.–î–∏—Ä–µ–∫—Ç –∏ Google Ads –ø–æ–¥ KPI, –±–µ–∑ —Å–ª–∏–≤–∞ –±—é–¥–∂–µ—Ç–∞.</p>
        <div class="price-row"><div class="price"><span class="num"></span> ‚ÇΩ</div><div class="price-note"></div></div>
      </article>

      <article class="card tariff service-card" data-id="seo"       data-month="45000">
        <div class="h2">–ü—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ —Å–∞–π—Ç–∞</div>
        <p class="muted-sm">–°—Ç—Ä—É–∫—Ç—É—Ä–∞, —Ç–µ–∫—Å—Ç—ã, seo, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è.</p>
        <div class="price-row"><div class="price"><span class="num"></span> ‚ÇΩ</div><div class="price-note"></div></div>
      </article>

      <article class="card tariff service-card" data-id="crm"       data-month="55000">
        <div class="h2">CRM –∏ —á–∞—Ç-–±–æ—Ç—ã</div>
        <p class="muted-sm">–ê–≤—Ç–æ–≤–æ—Ä–æ–Ω–∫–∏, –∑–∞—è–≤–∫–∏, –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ü–∏–∫–ª–æ–≤ –ø—Ä–æ–¥–∞–∂.</p>
        <div class="price-row"><div class="price"><span class="num"></span> ‚ÇΩ</div><div class="price-note"></div></div>
      </article>

      <article class="card tariff service-card" data-id="mp"        data-month="40000">
        <div class="h2">–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å—ã</div>
        <p class="muted-sm">–ö–∞—Ä—Ç–æ—á–∫–∏, –∫–ª—é—á–∏, –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ ‚Äî –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª.</p>
        <div class="price-row"><div class="price"><span class="num"></span> ‚ÇΩ</div><div class="price-note"></div></div>
      </article>

      <article class="card tariff service-card" data-id="analytics" data-month="50000">
        <div class="h2">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è</div>
        <p class="muted-sm">–°–∫–≤–æ–∑–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ + –∫–∞—Ä—Ç–∞ –¥–µ–π—Å—Ç–≤–∏–π –Ω–∞ 6‚Äì12 –º–µ—Å.</p>
        <div class="price-row"><div class="price"><span class="num"></span> ‚ÇΩ</div><div class="price-note"></div></div>
      </article>

      <article class="card tariff service-card" data-id="smm"       data-month="35000">
        <div class="h2">–†–µ–ø—É—Ç–∞—Ü–∏—è –∏ SMM</div>
        <p class="muted-sm">–û–±—Ä–∞–∑ –±—Ä–µ–Ω–¥–∞ –∏ —Ä–∞–±–æ—Ç–∞ —Å –æ—Ç–∑—ã–≤–∞–º–∏.</p>
        <div class="price-row"><div class="price"><span class="num"></span> ‚ÇΩ</div><div class="price-note"></div></div>
      </article>

      <article class="card tariff service-card" data-id="tg"        data-month="38000">
        <div class="h2">Telegram-–º–∞—Ä–∫–µ—Ç–∏–Ω–≥</div>
        <p class="muted-sm">–ö–∞–Ω–∞–ª—ã, –∞–≤—Ç–æ–≤–æ—Ä–æ–Ω–∫–∏, —Ä–∞—Å—Å—ã–ª–∫–∏, —Ç–æ–ø–æ–≤—ã–µ —Å–≤—è–∑–∫–∏.</p>
        <div class="price-row"><div class="price"><span class="num"></span> ‚ÇΩ</div><div class="price-note"></div></div>
      </article>
    </div>



</section>



  <!-- ABOUT -->
  <section class="page" id="about">
    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞-–∑–∞–≥–æ–ª–æ–≤–æ–∫ -->
    <div class="card page-title">
      <h2 class="h1">–í–æ–ø—Ä–æ—Å-–æ—Ç–≤–µ—Ç</h2>
      <p class="muted-sm">–ö–æ—Ä–æ—Ç–∫–æ –∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ ‚Äî —Å–ø—Ä–æ—Å–∏ –≤ –º–∏–Ω–∏-—á–∞—Ç–µ</p>
    </div>

    <!-- –°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ —á–∞—Ç–∞ (–Ω–µ –≤–ª–æ–∂–µ–Ω–Ω–∞—è –≤ –¥—Ä—É–≥—É—é) -->
    <div class="card about-chat" id="aboutChat">
      <div class="chat-window" id="chatBox" aria-live="polite"></div>

      <div class="chat-quick" id="chatControls">
        <button class="chip" data-q="what">–ß–µ–º –∑–∞–Ω–∏–º–∞—é—Å—å?</button>
        <button class="chip" data-q="price">–°–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç?</button>
        <button class="chip" data-q="start">–ö–∞–∫ –±—ã—Å—Ç—Ä–æ –Ω–∞—á–Ω—ë–º?</button>
        <button class="chip" data-q="cases">–ê –∫–µ–π—Å—ã –µ—Å—Ç—å?</button>
        <button class="btn" id="chatReset">–°–±—Ä–æ—Å</button>
      </div>
    </div>
  </section>




  <!-- BONUSES -->
  <section class="page" id="bonuses">
    <div class="card page-title">
      <h2 class="h1">–ë–æ–Ω—É—Å—ã</h2>
      <p class="muted-sm">–ö—Ä—É—Ç–∏ –∫–æ–ª–µ—Å–æ –∏ –∑–∞–±–∏—Ä–∞–π –≤—ã–ø–∞–≤—à–∏–π –ø–æ–¥–∞—Ä–æ–∫.</p>
    </div>

    <div class="card bonus-card">
      <div class="h2"></div>

      <!-- –í–ï–†–•: —Ç–æ–ª—å–∫–æ –ø–ª–∞—à–∫–∞-–ø–æ–¥—Å–∫–∞–∑–∫–∞ -->
      <div class="bonus-head">
        <div id="pickedPill" class="picked-pill muted">–ù–∞–∂–º–∏ ¬´–ö—Ä—É—Ç–∞–Ω—É—Ç—å¬ª</div>
      </div>

      <!-- –ö–û–õ–ï–°–û -->
      <div id="bonusWheel" class="bonus-wheel" aria-live="polite">
        <div class="wheel-track" id="wheelTrack">
          <button class="bonus" data-name="–ê—É–¥–∏—Ç"><img src="/bonus1.png" alt="–ê—É–¥–∏—Ç"><span>–ê—É–¥–∏—Ç</span></button>
          <button class="bonus" data-name="–ú–∞—Ñ–∏—è-–æ—Ñ—Ñ–µ—Ä"><img src="/bonus2.png" alt="–ú–∞—Ñ–∏—è-–æ—Ñ—Ñ–µ—Ä"><span>–ú–∞—Ñ–∏—è-–æ—Ñ—Ñ–µ—Ä</span></button>
          <button class="bonus" data-name="Cust Dev"><img src="/bonus3.png" alt="Cust Dev"><span>Cust Dev</span></button>
          <button class="bonus" data-name="–°–∫–∏–¥–∫–∞"><img src="/bonus4.png" alt="–°–∫–∏–¥–∫–∞"><span>–°–∫–∏–¥–∫–∞</span></button>
          <button class="bonus" data-name="–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è"><img src="/bonus5.png" alt="–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è"><span>–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è</span></button>
          <button class="bonus" data-name="–ß–µ–∫-–ª–∏—Å—Ç"><img src="/bonus6.png"
              alt="–ß–µ–∫-–ª–∏—Å—Ç"><span>–ß–µ–∫-–ª–∏—Å—Ç</span></button>
        </div>
        <div class="wheel-center"></div>
      </div>

      <!-- –ù–ò–ó: –¥–≤–µ –∫–Ω–æ–ø–∫–∏ –≤ —Ä—è–¥ -->
      <div class="actions">
        <button class="btn btn-primary" id="spinBtn">–ö—Ä—É—Ç–∞–Ω—É—Ç—å</button>
        <button class="btn btn-primary" id="claimBtn" disabled>–ó–∞–±—Ä–∞—Ç—å</button>
      </div>
    </div>

    <div class="card page-title">
      <h2 class="h1">–ß—Ç–æ –º–æ–∂–Ω–æ –≤—ã–π–≥—Ä–∞—Ç—å</h2>
      <p class="muted-sm"></p>
    </div>

  <!-- –ü—Ä–∏–º–µ—Ä –∫–∞—Ä—Ç–æ—á–µ–∫. –ö–∞—Ä—Ç–∏–Ω–∫–∞ –±–µ—Ä—ë—Ç—Å—è –∏–∑ –ö–û–†–ù–Ø: /bonus1.png –∏ —Ç.–ø. -->
  <div class="bonuses-grid">
    <article class="bonus-item" data-img="bonus1.png">
      <div class="pic"></div>
      <div class="txt">
        <h3 class="h2">–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥-–∞—É–¥–∏—Ç</h3>
        <p class="muted-sm">–ù–∞–π–¥–µ–º, –≥–¥–µ —Å–ª–∏–≤–∞—é—Ç—Å—è –¥–µ–Ω—å–≥–∏ –∏ –∫–∞–∫ –≤–µ—Ä–Ω—É—Ç—å –ø—Ä–∏–±—ã–ª—å</p>
      </div>
    </article>

      <div class="bonuses-grid">
    <article class="bonus-item" data-img="bonus2.png">
      <div class="pic"></div>
      <div class="txt">
        <h3 class="h2">–ú–∞—Ñ–∏—è-–æ—Ñ—Ñ–µ—Ä</h3>
        <p class="muted-sm">–£–ø–∞–∫—É–µ–º —Ü–µ–Ω–Ω–æ—Å—Ç—å —Ç–∞–∫, —á—Ç–æ –∫–ª–∏–µ–Ω—Ç –Ω–µ —Å–º–æ–∂–µ—Ç –ø—Ä–æ–π—Ç–∏ –º–∏–º–æ</p>
      </div>
    </article>

      <div class="bonuses-grid">
    <article class="bonus-item" data-img="bonus3.png">
      <div class="pic"></div>
      <div class="txt">
        <h3 class="h2">Customer Development</h3>
        <p class="muted-sm">–í—Å–∫—Ä–æ–µ–º –±–æ–ª–∏, –º–æ—Ç–∏–≤—ã –∏ –º–µ—á—Ç—ã –≤–∞—à–µ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏</p>
      </div>
    </article>

      <div class="bonuses-grid">
    <article class="bonus-item" data-img="bonus4.png">
      <div class="pic"></div>
      <div class="txt">
        <h3 class="h2">–°–∫–∏–¥–∫–∞</h3>
        <p class="muted-sm">–°–∫–∏–¥–∫–∞ 15% –Ω–∞ —É—Å–ª—É–≥–∏ –ø–æ –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏—é –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ</p>
      </div>
    </article>

      <div class="bonuses-grid">
    <article class="bonus-item" data-img="bonus5.png">
      <div class="pic"></div>
      <div class="txt">
        <h3 class="h2">–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è</h3>
        <p class="muted-sm">–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –ø–æ –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏—é –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ</p>
      </div>
    </article>

      <div class="bonuses-grid">
    <article class="bonus-item" data-img="bonus6.png">
      <div class="pic"></div>
      <div class="txt">
        <h3 class="h2">–ß–µ–∫-–ª–∏—Å—Ç</h3>
        <p class="muted-sm">–ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ–≥–æ –∞—É–¥–∏—Ç–∞ –ø–æ 61 –ø—É–Ω–∫—Ç—É</p>
      </div>
    </article>


  </section>




  <!-- INVITE / –ü–∞—Ä—Ç–Ω—ë—Ä–∫–∞ -->
  <section class="page" id="invite">
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ä–∞–∑–¥–µ–ª–∞ ‚Äî –æ—Ç–¥–µ–ª—å–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ -->
    <div class="card page-title">
      <h2 class="h1">–ü–∞—Ä—Ç–Ω—ë—Ä–∫–∞</h2>
      <p class="muted-sm">–î–µ–ª–∏—Å—å —Å—Å—ã–ª–∫–æ–π ‚Äî –ø–æ–ª—É—á–∞–π –±–æ–Ω—É—Å—ã –∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã.</p>
    </div>

    <!-- –°–µ—Ç–∫–∞ –∏–∑ –¥–≤—É—Ö —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫ -->
    <div class="ref-grid">
      <!-- –õ–µ–≤–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ -->
      <div class="card ref-card">
        <div class="h2">–¢–≤–æ—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞</div>

        <div class="ref-row">
          <input id="refLink" class="ref-input" readonly value="">
          <button id="copyRef" class="btn btn-primary">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
          <button id="shareRef" class="btn">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
        </div>

        <div class="ref-banner">–ó–∞ –∫–∞–∂–¥–æ–≥–æ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –¥—Ä—É–≥–∞ ‚Äî –±–æ–Ω—É—Å—ã –∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã</div>

        <div class="ref-actions">
          <button id="demoAdd" class="btn">+1 –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ (–¥–µ–º–æ)</button>
        </div>
      </div>

      <!-- –ü—Ä–∞–≤–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ -->
      <div class="card ref-leader">
        <div class="h2">–¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤</div>
        <ol id="leadList" class="lead-list"></ol>
        <button id="demoReset" class="btn" style="margin-top:10px">–°–±—Ä–æ—Å–∏—Ç—å –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ</button>
      </div>
    </div>
  </section>


  <!-- CONSULT (Calendar) -->
  <section class="page" id="consult">
    <div class="card page-title">
      <h2 class="h1">–ó–∞–ø–∏—Å—å –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é</h2>
      <p class="muted-sm">–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è –Ω–∞–∂–º–∏—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å.</p>
    </div>

    <!-- –ë–ª–æ–∫ 1: –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å -->
    <div class="card consult-card" id="dur-card">
      <div class="h3">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</div>
      <div class="dur-row">
        <button class="btn dur btn-primary" data-min="30">30 –º–∏–Ω</button>
        <button class="btn dur" data-min="60">60 –º–∏–Ω</button>
        <button class="btn dur" data-min="90">90 –º–∏–Ω</button>
      </div>
    </div>

    <!-- –ë–ª–æ–∫ 2: –ö–∞–ª–µ–Ω–¥–∞—Ä—å -->
    <div class="card consult-card" id="cal-card">
      <div class="h3">–ö–∞–ª–µ–Ω–¥–∞—Ä—å</div>
      <div id="cal" class="calendar" style="min-height:260px"></div>
    </div>

    <!-- –ë–ª–æ–∫ 3: –î–æ—Å—Ç—É–ø–Ω–æ–µ –≤—Ä–µ–º—è -->
    <div class="card consult-card" id="slots-card">
      <div class="h3">–î–æ—Å—Ç—É–ø–Ω–æ–µ –≤—Ä–µ–º—è</div>
      <div id="slots" class="slots"></div>
    </div>

    <!-- –ë–ª–æ–∫ 4: –ö–æ–Ω—Ç–∞–∫—Ç—ã -->
    <div class="card consult-card" id="contact-card">
      <div class="h3">–ö–æ–Ω—Ç–∞–∫—Ç—ã</div>
      <div class="contact-row">
        <input id="contact" type="tel" inputmode="numeric" placeholder="+79991234567" />
        <button id="confirmConsult" class="btn btn-primary">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
      </div>
    </div>
  </section>



  </main>

  <!-- Floating Profile button -->
  <button class="btn btn-ghost profile-toggle">üë§ –ü—Ä–æ—Ñ–∏–ª—å</button>

  <!-- –ü—Ä–æ—Ñ–∏–ª—å ‚Äî bottom sheet -->
  <div class="sheet-backdrop" id="profileBackdrop"></div>
  <section class="sheet" id="profileSheet" aria-hidden="true">
    <div class="grab" aria-hidden="true"></div>

    <div class="sheet-bar">
      <div class="sheet-title"></div>
      <button class="btn btn-ghost btn-sm" id="profileClose">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>

    <!-- –í–µ—Ä—Ö: –∞–≤–∞—Ç–∞—Ä + –∏–º—è -->
    <div class="sheet-head">
      <div class="ava">
        <img id="psAvatar" alt="">
        <div id="psAvaFallback" class="ava-fallback">–ì</div>
      </div>
      <div class="who">
        <div id="psName" class="name">–ì–æ—Å—Ç—å</div>
        <div id="psHandle" class="handle">‚Äî</div>
      </div>
    </div>

    <!-- –°—Ç–∞—Ç—ã -->
    <div class="sheet-stats">
      <div class="stat">
        <div class="label">–û—á–∫–∏</div>
        <div id="psPoints" class="value">0</div>
      </div>
      <div class="stat">
        <div class="label">–ü–æ—Å–ª–µ–¥–Ω–∏–π –ø—Ä–∏–∑</div>
        <div id="psPrize" class="value">‚Äî</div>
      </div>
      <div class="stat">
        <div class="label">–ó–∞–ø–∏—Å—å</div>
        <div id="psBooking" class="value">–ù–µ—Ç</div>
      </div>
    </div>
  </section>



  <div class="toasts" aria-live="polite"></div>
  </div>

  <!-- Telegram SDK (–µ—Å–ª–∏ –∑–∞–ø—É—Å–∫–∞–µ—à—å –≤ WebApp) -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <script>
    /* === Referral tracker: —á–∏—Ç–∞–µ–º start_param –∏ —à–ª—ë–º –Ω–∞ –±—ç–∫–µ–Ω–¥ === */
    (function trackReferral() {
      const TG = window.Telegram && window.Telegram.WebApp;
      if (!TG || !TG.initDataUnsafe) return;       // –Ω–µ –≤ Telegram ‚Äî –≤—ã—Ö–æ–¥–∏–º
      try { TG.ready && TG.ready(); } catch (_) { }

      const user = TG.initDataUnsafe.user || null;
      const myUid = user?.id ? String(user.id) : 'anon';
      const startParam = (TG.initDataUnsafe.start_param || '').trim();

      // –∂–¥—ë–º —Ñ–æ—Ä–º–∞—Ç ref_<uid –ø—Ä–∏–≥–ª–∞—Å–∏–≤—à–µ–≥–æ>
      const m = /^ref_(.+)$/i.exec(startParam);
      if (!m) return;

      const refUid = m[1];
      if (refUid === myUid) return;                // —Å–∞–º —Å–µ–±—è ‚Äî –∏–≥–Ω–æ—Ä

      // –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –Ω–∞ —ç—Ç–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ (—á—Ç–æ–± –Ω–µ —Å–ø–∞–º–∏—Ç—å —Å–µ—Ä–≤–µ—Ä)
      const dedupKey = `ref:tracked:${myUid}:${refUid}`;
      if (localStorage.getItem(dedupKey)) return;

      // fire-and-forget –Ω–∞ –±—ç–∫–µ–Ω–¥/GAS: –æ–Ω –Ω–∞—á–∏—Å–ª–∏—Ç +100 –æ—á–∫–æ–≤ –ü–†–ò–ì–õ–ê–°–ò–í–®–ï–ú–£ (refUid)
      fetch('/api/ref/track', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ refUid, newUid: myUid })
      })
        .then(() => localStorage.setItem(dedupKey, '1'))
        .catch(() => {/* –º–æ–∂–Ω–æ —Ç–∏—Ö–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–ª–∏ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å */ });
    })();
  </script>


  <script>
    // ==== normalize ?page=... -> #... –ü–ï–†–ï–î –ø–µ—Ä–≤—ã–º showPage() ====
    (function () {
      try {
        const u = new URL(location.href);
        const p = (u.searchParams.get('page') || '').trim();

        // –µ—Å–ª–∏ ?page –∑–∞–¥–∞–Ω –∏ —Ç–∞–∫–∞—è —Å–µ–∫—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É–µ—Ç ‚Äî –ø–µ—Ä–µ–≤–æ–¥–∏–º –≤ #hash
        if (p && document.getElementById(p)) {
          u.searchParams.delete('page');   // —É–±—Ä–∞—Ç—å query
          u.hash = '#' + p;                // –ø–æ—Å—Ç–∞–≤–∏—Ç—å –Ω—É–∂–Ω—ã–π #hash
          history.replaceState(null, '', u.pathname + u.search + u.hash);
        }
        // –µ—Å–ª–∏ –Ω–∏ hash, –Ω–∏ –≤–∞–ª–∏–¥–Ω–æ–≥–æ page ‚Äî –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é #home
        else if (!location.hash) {
          history.replaceState(null, '', '#home');
        }
      } catch (_) {
        // –Ω–∞ –≤—Å—è–∫–∏–π ‚Äî –ø—Ä–æ—Å—Ç–∞—è –∑–∞–ø–∞—Å–Ω–∞—è –≤–µ—Ç–∫–∞
        const p = (location.search.match(/[?&]page=([^&]+)/) || [])[1];
        if (p && document.getElementById(p)) location.hash = p;
        else if (!location.hash) location.hash = 'home';
      }
    })();
  </script>

  <script>
    (function () {
      const TG = window.Telegram && window.Telegram.WebApp;
      try { TG && TG.ready(); } catch (_) { }

      // –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Ö–µ–ª–ø–µ—Ä
      function haptic(kind = 'light', notify) {
        try {
          if (TG && TG.HapticFeedback) {
            if (notify) { TG.HapticFeedback.notificationOccurred(notify); return; } // 'success'|'warning'|'error'
            if (kind === 'selection') { TG.HapticFeedback.selectionChanged(); return; }
            TG.HapticFeedback.impactOccurred(kind); // 'light'|'medium'|'heavy'|'rigid'|'soft'
            return;
          }
        } catch (_) { }
        // –§–æ–ª–ª–±–µ–∫ (Android)
        try {
          if (navigator.vibrate) {
            if (notify === 'success') return void navigator.vibrate([10, 20, 10]);
            if (notify === 'warning') return void navigator.vibrate([20, 30, 20]);
            if (notify === 'error') return void navigator.vibrate([35, 35, 35]);
            navigator.vibrate(kind === 'heavy' ? 35 : kind === 'medium' ? 25 : 15);
          }
        } catch (_) { }
      }

      // üëâ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞ pointerdown ‚Äî —Ç–∞–∫ –æ—Ç–∫–ª–∏–∫ –º–≥–Ω–æ–≤–µ–Ω–Ω–µ–µ
      const onTap = (sel, fn) => {
        const root = document.querySelector(sel);
        if (!root) return;
        root.addEventListener('pointerdown', e => {
          if (fn(e) !== false) haptic('selection');
        }, { passive: true });
      };

      // –¢–∞–±—ã –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
      onTap('#spa-nav', e => e.target.closest('[data-page]'));

      // –ö–Ω–æ–ø–∫–∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (30/60/90)
      onTap('.dur-row', e => e.target.closest('.dur'));

      // –°–ª–æ—Ç—ã –≤—Ä–µ–º–µ–Ω–∏
      onTap('#slots', e => e.target.closest('button,.btn,.slot,.slot-btn'));

      // –ö–Ω–æ–ø–∫–∞ ¬´–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å¬ª ‚Äî –∑–∞–º–µ—Ç–Ω–µ–µ
      const confirmBtn = document.getElementById('confirmConsult');
      confirmBtn && confirmBtn.addEventListener('pointerdown', () => haptic('medium'), { passive: true });

      // –µ—Å–ª–∏ –≥–¥–µ-—Ç–æ –≤ –∫–æ–¥–µ —É —Ç–µ–±—è –µ—Å—Ç—å —É—Å–ø–µ—à–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ ‚Äî –¥–µ—Ä–Ω–∏:
      // haptic('heavy', 'success');  // –Ω–∞ —É—Å–ø–µ—Ö
      // haptic('medium', 'error');   // –Ω–∞ –æ—à–∏–±–∫—É
    })();
  </script>


  <script>
    /* ==== CONFIG ==== */
    window.APP_CONFIG = window.APP_CONFIG || {};
    APP_CONFIG.API_BASE = APP_CONFIG.API_BASE || "https://cifrovichkoff.cyberian13.workers.dev"; // ‚Üê –∑–∞–º–µ–Ω–∏ –Ω–∞ —Å–≤–æ–π –≤–æ—Ä–∫–µ—Ä
    APP_CONFIG.ENABLE_HOOKS = (APP_CONFIG.ENABLE_HOOKS ?? true);

    /* ==== –ê–≤—Ç–æ–±—Ä–µ–Ω–¥–∏–Ω–≥: –ª–æ–≥–æ—Ç–∏–ø + —Ñ–∞–≤–∏–∫–æ–Ω–∫–∏ ==== */
    (function autoBrand() {
      const host = document.querySelector('.logo');
      if (host) {
        const cand = ['logo.svg', 'logo.png', 'logo.jpg', 'logo.webp'];
        (async () => { for (const f of cand) { try { const r = await fetch(f, { method: 'HEAD' }); if (r.ok) { const img = new Image(); img.src = f; img.alt = 'logo'; img.style.cssText = 'width:100%;height:100%;object-fit:cover;border-radius:inherit;display:block'; host.innerHTML = ''; host.appendChild(img); break; } } catch (_) { } } })();
      }
      ['favicon-16.png', 'favicon.png', 'favicon.ico', 'logo.svg'].forEach(h => { const l = document.createElement('link'); l.rel = 'icon'; l.href = h; document.head.appendChild(l); });
    })();

    /* ==== Toast (–¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è) ==== */
    const __toasts = new Set();
    function showToast(title, msg = '', key = '', timeout = 4600) {
      if (key && __toasts.has(key)) return; if (key) __toasts.add(key);
      let box = document.querySelector('.toasts'); const t = document.createElement('div'); t.className = 'toast';
      t.innerHTML = `<div class="t">${title}</div>${msg ? `<div class="m">${msg}</div>` : ''}`; box.appendChild(t);
      setTimeout(() => { t.remove(); if (key) __toasts.delete(key); }, timeout);
    }

    /* ==== –õ–æ–∫–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ —É –∫–Ω–æ–ø–∫–∏ ==== */
    function blastConfetti(btn, count = 24) {
      try {
        const rect = btn.getBoundingClientRect(); const root = document.createElement('div');
        root.style.cssText = `position:fixed;left:${rect.left}px;top:${rect.top}px;width:${rect.width}px;height:${rect.height}px;pointer-events:none;overflow:visible;z-index:9999`;
        document.body.appendChild(root);
        for (let i = 0; i < count; i++) {
          const p = document.createElement('i'); const x = rect.width / 2, y = rect.height / 2; const dx = (Math.random() * 2 - 1) * 80, dy = (Math.random() * -1) * 120 - 40; const rot = (Math.random() * 360) | 0; const size = 6 + (Math.random() * 6 | 0);
          p.style.cssText = `position:absolute;left:${x}px;top:${y}px;width:${size}px;height:${size}px;background:currentColor;border-radius:2px;transform:translate(-50%,-50%) rotate(${rot}deg);opacity:1`;
          p.style.color = ['#7b5bff', '#3de0c5', '#5b8cff', '#ffffff'][i % 4]; root.appendChild(p);
          const tx = x + dx, ty = y + dy;
          p.animate([{ transform: `translate(-50%,-50%) rotate(${rot}deg)`, opacity: 1 }, { transform: `translate(${tx - rect.left}px,${ty - rect.top}px) rotate(${rot + 180}deg)`, opacity: 0 }], { duration: 700 + (Math.random() * 400 | 0), easing: 'cubic-bezier(.2,.8,.2,1)' }).onfinish = () => p.remove();
        }
        setTimeout(() => root.remove(), 1200);
      } catch (_) { }
    }

    /* ==== Telegram context ==== */
    const tg = (window.Telegram && Telegram.WebApp) ? Telegram.WebApp : null;
    function getTgId() { try { return tg?.initDataUnsafe?.user?.id || null } catch (_) { return null } }
    function getStartParam() { try { return tg?.initDataUnsafe?.start_param || '' } catch (_) { return '' } }
    function getInitData() { try { return tg?.initData || '' } catch (_) { return '' } }
    try { tg?.ready(); tg?.expand?.(); } catch (_) { }

    /* ==== API helpers ==== */
    function qp(base, params) { const u = new URL(base); Object.entries(params || {}).forEach(([k, v]) => { if (v !== undefined && v !== null) u.searchParams.set(k, String(v)); }); return u; }
    async function apiGet(path, params) { const r = await fetch(qp(APP_CONFIG.API_BASE + path, params)); const t = await r.text(); try { return JSON.parse(t) } catch { return { ok: false, error: 'bad_json', raw: t } } }
    async function apiPost(path, body) { body = body || {}; if (!body.tg_id) body.tg_id = String(getTgId() || ''); if (!body._start_param) body._start_param = getStartParam(); if (!body._init_data) body._init_data = getInitData(); const r = await fetch(APP_CONFIG.API_BASE + path, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(body) }); const t = await r.text(); try { return JSON.parse(t) } catch { return { ok: false, error: 'bad_json', raw: t } } }

    /* ==== –¢–µ–ª–µ—Ñ–æ–Ω: –º—è–≥–∫–∞—è –º–∞—Å–∫–∞ + –∞–Ω—Ç–∏‚Äëzoom ==== */
    (function phoneMask() { const el = document.getElementById('contact'); if (!el) return; el.setAttribute('inputmode', 'numeric'); el.setAttribute('autocomplete', 'tel'); el.style.fontSize = '16px'; const fmt = v => { const d = (v || '').replace(/\D+/g, ''); let p = d; if (p.startsWith('8')) p = '7' + p.slice(1); if (!p.startsWith('7')) p = '7' + p; return '+' + p.slice(0, 11) }; el.addEventListener('input', () => { const s = el.selectionStart, before = el.value, after = fmt(before); el.value = after; const shift = after.length - before.length; el.setSelectionRange(s + shift, s + shift); }); })();

/* ==== –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Ä–∞—Å—á—ë—Ç (–±–µ–∑ –∫–æ–Ω—Ñ–µ—Ç—Ç–∏, c —Ö–∞–ø—Ç–∏–∫–æ–º –∏ –ø–µ—Ä–µ—Ö–æ–¥–æ–º –≤ #consult) ==== */
(function personalCalc(){
  const btn = document.getElementById('ctaCalc');
  if (!btn) return;

  // –ª—ë–≥–∫–∏–π —Ö–∞–ø—Ç–∏–∫ (Telegram WebApp ‚Üí fallback navigator.vibrate)
  function hapticLight(){
    try{
      const TG = window.Telegram && window.Telegram.WebApp;
      if (TG && TG.HapticFeedback){
        TG.HapticFeedback.impactOccurred('light');
        TG.HapticFeedback.selectionChanged?.();
        return;
      }
    }catch(_){}
    try{ navigator.vibrate && navigator.vibrate(15); }catch(_){}
  }

  btn.addEventListener('click', async () => {
    hapticLight();

    // —Ç–æ—Å—Ç ‚Äî –æ—Å—Ç–∞–≤–ª—è–µ–º –∫–∞–∫ –±—ã–ª–æ
    showToast('–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞', '–ü–æ–¥–≥–æ—Ç–æ–≤–∏–º –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Ä–∞—Å—á—ë—Ç', 'calc_sent');

    // –ø–µ—Ä–µ—Ö–æ–¥ –≤ —Ä–∞–∑–¥–µ–ª ¬´–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è¬ª
    try{
      location.hash = '#consult';
      if (typeof showPage === 'function') showPage('#consult');
    }catch(_){}

    // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ö—É–∫ –≤ –±–µ–∫ (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ –≤ –∫–æ–Ω—Ñ–∏–≥–µ)
    try{
      if (window.APP_CONFIG?.ENABLE_HOOKS){
        await apiPost('/api/prize/code', { code: '–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç' });
      }
    }catch(_){}
  });
})();

    /* ==== –ö–æ–ª–µ—Å–æ –ø—Ä–∏–∑–æ–≤ ==== */
    (function wheel() { const btn = document.getElementById('spin'), out = document.getElementById('spinRes'); if (!btn || !out) return; btn.addEventListener('click', async () => { blastConfetti(btn, 30); try { const res = await apiPost('/api/prize/spin', {}); if (res?.ok) { out.textContent = '–í—ã–ø–∞–ª–æ: ' + (res.prize?.title || '–ø—Ä–∏–∑'); showToast('–ü—Ä–∏–∑ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω', '–°–º–æ—Ç—Ä–∏ –≤ –ø—Ä–æ—Ñ–∏–ª–µ', 'spin_ok'); } else { out.textContent = '–ö—Ä—É—Ç–∏–ª–∫–∞ —Å–∫–æ—Ä–æ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞'; showToast('–°–∫–æ—Ä–æ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ', '–í–µ–¥–µ–Ω–∏–µ –≤ —Ç–∞–±–ª–∏—Ü–µ –æ—Ç–∫–ª—é—á–µ–Ω–æ', 'spin_warn'); } } catch (_) { out.textContent = '–û—à–∏–±–∫–∞ —Å–µ—Ç–∏'; } }); })();

    /* ==== –ë–æ–Ω—É—Å—ã ==== */
    (function bonuses() { document.querySelectorAll('.btn.bonus').forEach(btn => { btn.addEventListener('click', async () => { const code = btn.dataset.code || '–ë–æ–Ω—É—Å'; blastConfetti(btn, 24); showToast('–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ', code, `bonus_${code}`); if (!APP_CONFIG.ENABLE_HOOKS) return; try { await apiPost('/api/prize/code', { code }); } catch (_) { } }); }); })();

    /* ==== –û–Ω–±–æ—Ä–¥–∏–Ω–≥-–±–æ–Ω—É—Å +100 ==== */
    (function welcomeBonus() { if (localStorage.getItem('onb_bonus_v1')) return; localStorage.setItem('onb_bonus_v1', '1'); (async () => { try { await apiPost('/api/bonus/grant', { kind: 'welcome', points: 100 }); } catch (_) { } showToast('+100 –±–æ–Ω—É—Å–æ–≤', '–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º üëã', 'onb100', 3000); })(); })();

    /* ================== –ö–ê–õ–ï–ù–î–ê–†–¨ ================== */
    (function calendar() {
      const calWrap = document.getElementById('cal'), slotsBox = document.getElementById('slots');
      const tz = Intl.DateTimeFormat().resolvedOptions().timeZone || 'Europe/Moscow';
      const durBtns = [...document.querySelectorAll('.dur')];
      const confirmBtn = document.getElementById('confirmConsult');
      const contactEl = document.getElementById('contact');
      if (!calWrap || !slotsBox || !confirmBtn) return;

      let cur = new Date(), y = cur.getFullYear(), m = cur.getMonth();
      let FREE = {}, selDate = null, selTime = null, selDur = 30, GRAN = 30, SERVER_FILTERED = false;

      durBtns.forEach(b => { b.addEventListener('click', async () => { durBtns.forEach(x => x.classList.remove('btn-primary')); b.classList.add('btn-primary'); selDur = +b.dataset.min || 30; await syncMonth(); if (selDate) renderSlots(selDate); }); });

      function dd2(n) { return String(n).padStart(2, '0') }
      function drawCalendar() { calWrap.innerHTML = ''; const head = document.createElement('div'); head.className = 'cal-head'; const mon = new Date(y, m, 1); const label = mon.toLocaleDateString('ru-RU', { month: 'long', year: 'numeric' }); head.innerHTML = `<div class="mon">${label[0].toUpperCase() + label.slice(1)}</div><div class="cta"><button class="btn btn-ghost" id="pm">‚óÄ</button><button class="btn btn-ghost" id="nm">‚ñ∂</button></div>`; calWrap.appendChild(head); const grid = document.createElement('div'); grid.className = 'cal-grid'; calWrap.appendChild(grid);['–ü–Ω', '–í—Ç', '–°—Ä', '–ß—Ç', '–ü—Ç', '–°–±', '–í—Å'].forEach(d => { const c = document.createElement('div'); c.className = 'cal-cell cal-dow'; c.textContent = d; grid.appendChild(c); }); const firstDow = (new Date(y, m, 1).getDay() + 6) % 7; for (let i = 0; i < firstDow; i++) { const s = document.createElement('div'); s.className = 'cal-cell muted'; grid.appendChild(s); } const count = new Date(y, m + 1, 0).getDate(); for (let d = 1; d <= count; d++) { const iso = `${y}-${dd2(m + 1)}-${dd2(d)}`; const cell = document.createElement('div'); cell.className = 'cal-cell'; cell.textContent = d; cell.dataset.iso = iso; cell.onclick = () => { selDate = iso; renderSlots(iso); grid.querySelectorAll('.cal-cell.sel').forEach(x => x.classList.remove('sel')); cell.classList.add('sel'); }; grid.appendChild(cell); } document.getElementById('pm').onclick = async () => { m--; if (m < 0) { m = 11; y--; } await syncMonth(true); }; document.getElementById('nm').onclick = async () => { m++; if (m > 11) { m = 0; y++; } await syncMonth(true); }; applyDaysState(); }

      function applyDaysState() { const grid = calWrap.querySelector('.cal-grid'); grid.querySelectorAll('.cal-cell').forEach(cell => { if (!cell.dataset.iso) return; const arr = FREE[cell.dataset.iso] || []; const off = !(Array.isArray(arr) && arr.length); cell.classList.toggle('off', off); cell.classList.toggle('muted', off); }); }

      function filterStartsByDuration(starts, dur, step) { if (!Array.isArray(starts) || !starts.length) return []; const toMin = t => { const m = t.match(/(\d{1,2}):(\d{2})/); return m ? (+m[1]) * 60 + (+m[2]) : null }; const need = Math.ceil(dur / step); const set = new Set(starts.map(toMin).filter(x => x != null)); return starts.filter(t => { const m = toMin(t); if (m == null) return false; for (let i = 0; i < need; i++) { if (!set.has(m + i * step)) return false } return true; }); }

      function renderSlots(dateIso) { slotsBox.innerHTML = ''; slotsBox.classList.add('show'); selTime = null; const arr = FREE[dateIso] || []; const list = SERVER_FILTERED ? arr : filterStartsByDuration(arr, selDur, GRAN); if (!list.length) { slotsBox.innerHTML = `<div class="muted">–ù–µ—Ç —Å–ª–æ—Ç–æ–≤ –¥–ª—è ${selDur} –º–∏–Ω</div>`; return; } list.forEach(t => { const b = document.createElement('button'); b.className = 'btn'; b.textContent = t; b.dataset.time = t; b.onclick = () => { slotsBox.querySelectorAll('.btn').forEach(x => x.classList.remove('btn-primary')); b.classList.add('btn-primary'); selTime = t; }; slotsBox.appendChild(b); }); }

      async function syncMonth(keepSel = false) { const first = `${y}-${dd2(m + 1)}-01`; const last = `${y}-${dd2(m + 1)}-${dd2(new Date(y, m + 1, 0).getDate())}`; const data = await apiGet('/api/slots/free', { from: first, to: last, tz, lead_min: 60, duration_min: selDur }); if (data?.ok) { FREE = data.days || {}; GRAN = data.gran || 30; SERVER_FILTERED = !!data.filtered_by_duration; drawCalendar(); if (keepSel && selDate && FREE[selDate]?.length) { const cell = calWrap.querySelector(`.cal-cell[data-iso="${selDate}"]`); if (cell) { cell.classList.add('sel'); renderSlots(selDate); } } else { const days = Object.keys(FREE).filter(d => (FREE[d] || []).length).sort(); selDate = days[0] || null; if (selDate) { const cell = calWrap.querySelector(`.cal-cell[data-iso="${selDate}"]`); if (cell) cell.classList.add('sel'); renderSlots(selDate); } else { slotsBox.innerHTML = '<div class="muted">–ù–µ—Ç —Å–≤–æ–±–æ–¥–Ω—ã—Ö –¥–∞—Ç</div>'; } } } else { showToast('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏', '–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Å–ª–æ—Ç—ã', 'slots_err'); } }

      confirmBtn.addEventListener('click', async () => {
        if (!selDate || !selTime) {
          showToast('–í—ã–±–µ—Ä–∏—Ç–µ —Å–ª–æ—Ç', '–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã', 'pick_warn');
          return;
        }

        const contact = (contactEl?.value || '').trim();
        if (!contact) {
          showToast('–ù—É–∂–µ–Ω –∫–æ–Ω—Ç–∞–∫—Ç', '–ù–∞–ø–∏—à–∏—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω', 'contact_warn');
          return;
        }

        confirmBtn.disabled = true;
        try {
          const hold = await apiPost('/api/slots/hold', {
            date: selDate, time: selTime, duration_min: selDur
          });

          if (!hold?.ok) {
            await syncMonth(true);
            showToast('–°–ª–æ—Ç –∑–∞–Ω—è—Ç', '–û–±–Ω–æ–≤–∏–ª —Å–ª–æ—Ç—ã', 'taken');
            return;
          }

          const res = await apiPost('/api/consult/book', {
            date: selDate, time: selTime, duration_min: selDur,
            format: 'call', contact
          });

          if (res?.ok) {
            // ‚¨áÔ∏è –î–û–ë–ê–í–õ–ï–ù–û: —Ñ–∏–∫—Å–∏—Ä—É–µ–º –∑–∞–ø–∏—Å—å –≤ –ø—Ä–æ—Ñ–∏–ª–µ
            try {
              // —Å–æ–±–∏—Ä–∞–µ–º ISO –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –¥–∞—Ç—ã/–≤—Ä–µ–º–µ–Ω–∏
              const iso = new Date(`${selDate}T${selTime}:00`).toISOString();
              window.Profile?.setBooking(iso);
            } catch (_) {
              // –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π ‚Äî –º—è–≥–∫–∏–π —Ñ–æ–ª–±—ç–∫
              window.Profile?.setBooking('yes');
            }

            blastConfetti(confirmBtn, 36);
            showToast('–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞', '–ú—ã —Å–≤—è–∂–µ–º—Å—è –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è', 'booked', 3200);
            await syncMonth(true);
          } else {
            showToast('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–ø–∏—Å–∞—Ç—å', '–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π —Å–ª–æ—Ç', 'book_err');
            await syncMonth(true);
          }
        } finally {
          confirmBtn.disabled = false;
        }
      });

      // init
      syncMonth();
    })();
    /* ==== –ü—Ä–æ—Ñ–∏–ª—å: –±—ã—Å—Ç—Ä–∞—è –≤—Å—Ç–∞–≤–∫–∞ + –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –ø–æ–¥—Ç—è–∂–∫–∞ ==== */
    (function profile() { (async () => { try { const res = await apiPost('/api/bootstrap', {}); if (res?.last_booking) { const s = `${res.last_booking.date} ${res.last_booking.time}`; const a = document.getElementById('profBook'); if (a) a.textContent = s; const b = document.getElementById('profileSheetBook'); if (b) b.textContent = s; } const lp = res?.last_prize?.title || (res?.prizes && res.prizes[0]?.title); if (lp) { const el1 = document.getElementById('profPrize'); if (el1) el1.textContent = lp; const el2 = document.getElementById('profileSheetPrize'); if (el2) el2.textContent = lp; } if (typeof res?.points === 'number') { const v = String(res.points); const p1 = document.getElementById('profPoints'); if (p1) p1.textContent = v; const p2 = document.getElementById('profileSheetPoints'); if (p2) p2.textContent = v; } const hint = document.getElementById('profHint'); if (hint) hint.textContent = '–î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω—ã.'; } catch (_) { /* —Ç–∏—Ö–æ */ } })(); })();

    /* ==== Bottom Sheet: toggle ==== */
    (function profileSheet() {
      const btn = document.querySelector('.profile-toggle');
      const sheet = document.getElementById('profileSheet');
      const close = document.getElementById('profileClose');
      const backdrop = document.getElementById('profileBackdrop');
      if (!btn || !sheet || !backdrop) return;

      const open = () => { sheet.classList.add('open'); backdrop.classList.add('open'); sheet.setAttribute('aria-hidden', 'false'); };
      const hide = () => { sheet.classList.remove('open'); backdrop.classList.remove('open'); sheet.setAttribute('aria-hidden', 'true'); };

      btn.addEventListener('click', open);
      close?.addEventListener('click', hide);
      backdrop.addEventListener('click', hide);

      // —Å–≤–∞–π–ø –≤–Ω–∏–∑, —á—Ç–æ–±—ã –∑–∞–∫—Ä—ã—Ç—å
      let startY = 0, dy = 0;
      sheet.addEventListener('touchstart', e => { startY = e.touches[0].clientY; dy = 0; }, { passive: true });
      sheet.addEventListener('touchmove', e => { dy = e.touches[0].clientY - startY; if (dy > 0) { sheet.style.transform = `translateY(${dy}px)`; } }, { passive: true });
      sheet.addEventListener('touchend', () => { if (dy > 40) hide(); sheet.style.transform = ''; });
    })();

    /* ==== SPA‚Äë–Ω–∞–≤–∏–≥–∞—Ü–∏—è + –ø—É–∑—ã—Ä—å (mobile‚Äëproof) ==== */
    (function nav() {
      const nav = document.getElementById('spa-nav'); if (!nav) return;
      const track = nav.querySelector('.track') || nav;
      const bubble = track.querySelector('.bubble');
      const links = Array.from(track.querySelectorAll('.btn,[data-page]'));

      const ALLOW_DRAG = (window.matchMedia && matchMedia('(pointer: coarse)').matches);

      function pageIdFromHash(h) { return (h || location.hash || '#home').replace('#', '') || 'home'; }

      function showPage(hash) {
        const id = pageIdFromHash(hash);
        document.querySelectorAll('main > section, section.page').forEach(s => {
          s.style.display = (s.id === id) ? 'block' : 'none';
        });
        links.forEach(a => a.classList.toggle('active', (a.dataset && a.dataset.page) === id));
        centerActive();
        moveBubble();
      }

      function moveBubble() {
        if (!bubble) return;
        const a = track.querySelector('.btn.active,[data-page].active') || links[0];
        if (!a) return;
        const aRect = a.getBoundingClientRect();
        const tRect = track.getBoundingClientRect();
        // left –≤–Ω—É—Ç—Ä–∏ .track (—É—á–∏—Ç—ã–≤–∞–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É —Å–∞–º–æ–≥–æ track)
        const left = (aRect.left - tRect.left) + track.scrollLeft + 6;
        bubble.style.left = Math.max(0, Math.round(left)) + 'px';
        bubble.style.width = Math.max(32, Math.round(aRect.width)) + 'px';
      }

      function centerActive() {
        const a = track.querySelector('.btn.active,[data-page].active');
        if (!a) return;
        if (a.scrollIntoView) {
          a.scrollIntoView({ behavior: 'smooth', inline: 'center', block: 'nearest' });
          setTimeout(moveBubble, 220);
        } else {
          const target = a.offsetLeft - (track.clientWidth - a.offsetWidth) / 2;
          const max = Math.max(0, track.scrollWidth - track.clientWidth);
          track.scrollTo({ left: Math.min(max, Math.max(0, target)), behavior: 'smooth' });
          setTimeout(moveBubble, 220);
        }
      }

      // –î–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–ª–∏–∫–∏ + –ø–æ—Ä–æ–≥ –¥–ª—è drag, —á—Ç–æ–±—ã –Ω–µ —Å—Ç—Ä–µ–ª—è–ª–∏ ¬´–ª–æ–∂–Ω—ã–µ¬ª –∫–ª–∏–∫–∏
      let isDown = false, sx = 0, sl = 0, moved = false;
      track.addEventListener('pointerdown', (e) => {
        if (!ALLOW_DRAG) return;
        isDown = true; moved = false; sx = e.clientX; sl = track.scrollLeft;
        track.setPointerCapture(e.pointerId);
      });
      track.addEventListener('pointermove', (e) => {
        if (!ALLOW_DRAG || !isDown) return;
        const dx = e.clientX - sx;
        if (Math.abs(dx) > 6) moved = true;
        track.scrollLeft = sl - dx;
        requestAnimationFrame(moveBubble);
      });
      track.addEventListener('pointerup', () => { isDown = false; });

      track.addEventListener('click', (e) => {
        const a = e.target.closest('.btn,[data-page]'); if (!a) return;
        if (moved) { moved = false; return; } // —ç—Ç–æ –±—ã–ª drag, –Ω–µ –∫–ª–∏–∫
        const id = a.dataset && a.dataset.page;
        if (id) {
          // –ü–æ–∑–≤–æ–ª—è–µ–º hashchange, –æ–Ω –≤—ã–∑–æ–≤–µ—Ç showPage()
          history.replaceState(null, '', '#' + id);
          showPage();
        } else {
          setTimeout(() => { moveBubble(); centerActive(); }, 0);
        }
      }, { passive: false });

      // –û–±–Ω–æ–≤–ª—è–µ–º –ø—É–∑—ã—Ä—å –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ/–∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–æ–≤
      track.addEventListener('scroll', () => { requestAnimationFrame(moveBubble); }, { passive: true });
      window.addEventListener('resize', () => { requestAnimationFrame(moveBubble); });
      window.addEventListener('orientationchange', () => { setTimeout(() => { moveBubble(); centerActive(); }, 0); });
      window.addEventListener('hashchange', () => showPage());

      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
      showPage();
      if (document.fonts && document.fonts.ready) document.fonts.ready.then(() => setTimeout(() => { moveBubble(); centerActive(); }, 0));
      window.addEventListener('load', () => { moveBubble(); centerActive(); });
    })();
    

    /* ==== –ò—Å—Ç–æ—Ä–∏—è + –ü–∞—Ä—Ç–Ω—ë—Ä–∫–∞: –∑–∞–≥—Ä—É–∑–∫–∞ –∏ —Ä–µ–Ω–¥–µ—Ä ==== */
    (function historyAndInvite() {
      function fmtDate(s) { try { if (!s) return '‚Äî'; const d = new Date(s.replace(' ', 'T')); return d.toLocaleString('ru-RU', { day: '2-digit', month: '2-digit', year: '2-digit', hour: '2-digit', minute: '2-digit' }); } catch (_) { return s; } }
      function el(id) { return document.getElementById(id); }
      function renderRows(tbody, rows, map) {
        tbody.innerHTML = '';
        (rows || []).forEach(r => {
          const tr = document.createElement('tr');
          tr.innerHTML = map(r);
          tbody.appendChild(tr);
        });
      }
      async function loadBootstrap() { try { return await apiPost('/api/bootstrap', {}); } catch (_) { return {}; } }
      async function loadList(path) { try { const r = await apiGet(path, {}); return r?.items || r?.rows || []; } catch (_) { return []; } }

      async function hydrate() {
        const data = await loadBootstrap();
        const spins = data.spins || await loadList('/api/spins/list');
        const prizes = data.prizes || await loadList('/api/prizes/list');
        const bonuses = data.bonuses || await loadList('/api/bonuses/list');
        const refs = data.referrals || data.refs || await loadList('/api/referrals/list');
        const ref = data.ref || {};

        // spins
        if (el('tblSpins')) {
          const tb = el('tblSpins').querySelector('tbody');
          renderRows(tb, spins, (r) => {
            const when = r.created_at || r.date || r.time || '';
            const prize = r.prize?.title || r.title || r.label || '‚Äî';
            const note = r.note || r.comment || '';
            return `<td>${fmtDate(when)}</td><td>${prize}</td><td>${note || ''}</td>`;
          });
        }
        // prizes
        if (el('tblPrizes')) {
          const tb = el('tblPrizes').querySelector('tbody');
          renderRows(tb, prizes, (r) => {
            const when = r.created_at || r.date || '';
            const title = r.title || r.code || '';
            const src = r.source || r.kind || r.type || '';
            return `<td>${fmtDate(when)}</td><td>${title}</td><td>${src}</td>`;
          });
        }
        // bonuses
        if (el('tblBonuses')) {
          const tb = el('tblBonuses').querySelector('tbody');
          renderRows(tb, bonuses, (r) => {
            const when = r.created_at || r.date || '';
            const kind = r.kind || r.title || '';
            const pts = r.points ?? r.value ?? '';
            return `<td>${fmtDate(when)}</td><td>${kind}</td><td>${pts}</td>`;
          });
        }
        // referrals
        if (el('tblRefs')) {
          const tb = el('tblRefs').querySelector('tbody');
          renderRows(tb, refs, (r) => {
            const when = r.created_at || r.date || '';
            const user = r.user?.name || r.username || r.user || '‚Äî';
            const st = r.status || r.stage || '‚Äî';
            return `<td>${fmtDate(when)}</td><td>${user}</td><td><span class="pill">${st}</span></td>`;
          });
        }
        // ref link
        if (el('refLink')) {
          const link = ref.link || ref.url || '';
          el('refLink').textContent = link || '‚Äî';
        }
        if (el('refCode')) el('refCode').textContent = ref.code || ref.id || '‚Äî';
        if (el('refCount')) el('refCount').textContent = (refs || []).length;
      }

      // –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞—Ö–æ–¥–µ –≤ —Ä–∞–∑–¥–µ–ª—ã
      function onRoute() {
        const page = (location.hash || '#home').slice(1);
        if (page === 'history' || page === 'invite') hydrate();
      }
      window.addEventListener('hashchange', onRoute);
      onRoute(); // –ø–µ—Ä–≤—ã–π —Ä–∞–∑
    })();

  </script>

  

  <script>
    // === Quick profit calc (sliders) ===

(function () {
  const rev = document.getElementById('rev');        // –±–∞–∑–æ–≤–∞—è –ø—Ä–∏–±—ã–ª—å (‚ÇΩ/–º–µ—Å)
  const pct = document.getElementById('pct');        // —ç—Ñ—Ñ–µ–∫—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (%)
  const revVal = document.getElementById('revVal');
  const pctVal = document.getElementById('pctVal');
  const oldVal = document.getElementById('oldTax');  // ¬´–ë—ã–ª–æ¬ª
  const newVal = document.getElementById('newTax');  // ¬´–°—Ç–∞–ª–æ¬ª
  const diffEl = document.getElementById('saveCounter'); // ¬´–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –ø—Ä–∏–±—ã–ª—å¬ª = —Ä–∞–∑–Ω–∏—Ü–∞
  if (!rev || !pct) return;

  const fmtRub = n => n.toLocaleString('ru-RU') + ' ‚ÇΩ';

  function animateTo(el, target){
    const start = parseInt((el.textContent || '0').replace(/[^\d]/g,'')) || 0;
    const dur = 500;
    const t0 = performance.now();
    function tick(t){
      const k = Math.min(1, (t - t0) / dur);
      const v = Math.round(start + (target - start) * (1 - Math.pow(1-k,3))); // easeOut
      el.textContent = fmtRub(v);
      if (k < 1) requestAnimationFrame(tick);
    }
    requestAnimationFrame(tick);
  }

  function recalc(){
    const base = +rev.value;     // ‚ÇΩ/–º–µ—Å (–ø–æ–ª–∑—É–Ω–æ–∫ 1)
    const eff  = +pct.value;     // %    (–ø–æ–ª–∑—É–Ω–æ–∫ 2)

    // –ú–Ω–æ–∂–∏—Ç–µ–ª—å: –∫–∞–∂–¥—ã–µ 12% –¥–∞—é—Ç √ó2.2
    const mul = Math.pow(2.2, eff / 12);

    const was = Math.round(base);
    const became = Math.round(base * mul);
    const diff = Math.max(0, became - was);

    // –ø–æ–¥–ø–∏—Å–∏ –≤–æ–∑–ª–µ –ø–æ–ª–∑—É–Ω–∫–æ–≤
    revVal.textContent = fmtRub(was);
    pctVal.textContent = eff + '%';

    // –±—ã–ª–æ/—Å—Ç–∞–ª–æ
    oldVal.textContent = fmtRub(was);
    newVal.textContent = fmtRub(became);

    // –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –ø—Ä–∏–±—ã–ª—å (—Ä–∞–∑–Ω–∏—Ü–∞)
    animateTo(diffEl, diff);
  }

  rev.addEventListener('input', recalc);
  pct.addEventListener('input', recalc);
  recalc();
})();



    // === Steps: "–ö–∞–∫ –º—ã —Ä–∞–±–æ—Ç–∞–µ–º" ===
(function () {
  const flow  = document.getElementById('flow');
  const next  = document.getElementById('flowNext');
  const reset = document.getElementById('flowReset');
  if (!flow || !next) return;

  const steps = Array.from(flow.querySelectorAll('.badge'));
  let i = 0; // —Ç–µ–∫—É—â–∏–π —à–∞–≥

  // –ª—ë–≥–∫–∏–π —Ö–∞–ø—Ç–∏–∫ (Telegram ‚Üí fallback vibrate)
  function hapticLight(){
    try{
      const TG = window.Telegram && window.Telegram.WebApp;
      if (TG?.HapticFeedback){ TG.HapticFeedback.impactOccurred('light'); return; }
    }catch(_){}
    try{ navigator.vibrate && navigator.vibrate(12); }catch(_){}
  }

  function render(){
    steps.forEach((s, idx) => {
      s.classList.toggle('is-current', idx === i);
      s.classList.toggle('is-done',    idx <  i);
      s.classList.toggle('is-future',  idx >  i);
      // –¥–ª—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
      s.setAttribute('aria-current', idx === i ? 'step' : 'false');
    });
    next.textContent = (i >= steps.length - 1) ? '–ü–µ—Ä–µ–π—Ç–∏ –∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏' : '–î–∞–ª—å—à–µ';
  }

  next.addEventListener('click', () => {
    if (i < steps.length - 1) {
      i++;
      hapticLight();   // –ª—ë–≥–∫–∏–π ¬´—â–µ–ª—á–æ–∫¬ª –Ω–∞ —à–∞–≥
      render();
    } else {
      hapticLight();
      try { window.showToast && showToast('–ì–æ—Ç–æ–≤–æ', '–û—Ç–∫—Ä—ã–ª —Ä–∞–∑–¥–µ–ª ¬´–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è¬ª'); } catch(_) {}
      // –ø–µ—Ä–µ—Ö–æ–¥ –≤ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é
      location.hash = '#consult';
      try {
        const a = document.querySelector('#spa-nav .btn[data-page="consult"]');
        a?.click();
      } catch(_) { /* no-op */ }
    }
  });

  reset && reset.addEventListener('click', () => { i = 0; hapticLight(); render(); });

  // —Å—Ç–∞—Ä—Ç–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ: —Ç–µ–∫—É—â–∏–π = 0, –±—É–¥—É—â–∏–µ —Å–∫—Ä—ã—Ç—ã
  render();
})();
  </script>

  <script>
    (function () {
      const wheel = document.getElementById('bonusWheel');
      const track = document.getElementById('wheelTrack');
      if (!wheel || !track) return;

      const items = Array.from(track.children);
      const N = items.length;

      const pill = document.getElementById('pickedPill');
      const claim = document.getElementById('claimBtn');
      const spin = document.getElementById('spinBtn');

      /* –ù–∞–∑–≤–∞–Ω–∏–µ -> —Å—Å—ã–ª–∫–∞ (–ø–æ–º–µ–Ω—è–π –ø–æ–¥ —Å–µ–±—è) */
      const bonusLinks = {
        "–ê—É–¥–∏—Ç": "https://t.me/sales_genius_aibot?start=audit",
        "–ú–∞—Ñ–∏—è-–æ—Ñ—Ñ–µ—Ä": "https://t.me/sales_genius_aibot?start=offer",
        "Cust Dev": "https://t.me/sales_genius_aibot?start=custdev",
        "–°–∫–∏–¥–∫–∞": "https://t.me/sales_genius_aibot?start=sale",
        "–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è": "https://t.me/sales_genius_aibot?start=consult",
        "–ß–µ–∫-–ª–∏—Å—Ç": "https://t.me/sales_genius_aibot?start=check"
      };

      /* ================== –æ–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã ================== */
      let STEP = 114; // —É—Ç–æ—á–Ω—è–µ–º –ø–æ —Ñ–∞–∫—Ç—É
      requestAnimationFrame(() => {
        const a = items[0]?.getBoundingClientRect();
        const b = items[1]?.getBoundingClientRect();
        if (a && b) {
          const dx = Math.round(b.left - a.left);
          if (dx > 40 && dx < 300) STEP = dx;
        }
      });

      let curr = 0; // ¬´–ø–ª–∞–≤–∞—é—â–µ–µ¬ª –ø–æ–ª–æ–∂–µ–Ω–∏–µ
      let startX = 0, startCurr = 0, dragging = false, lastX = 0, lastT = 0, vel = 0;
      let interacted = false; // —Å—Ç–∞–Ω–µ—Ç true –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –≤—ã–±–æ—Ä–∞

      const mod = (a, n) => ((a % n) + n) % n;
      const easeOut = t => 1 - Math.pow(1 - t, 3);
      function nearest(curr, idx, n) {
        let t = idx;
        while (t - curr > n / 2) t -= n;
        while (curr - t > n / 2) t += n;
        return t;
      }

      /* ===== –•–∞–ø—Ç–∏–∫–∏ (Telegram + —Ñ–æ–ª–ª–±–µ–∫) ===== */
      const TG = window.Telegram && window.Telegram.WebApp;
      function hapticPulse(level = 'light') {
        try {
          if (TG?.HapticFeedback) {
            if (level === 'selection') return TG.HapticFeedback.selectionChanged();
            TG.HapticFeedback.impactOccurred(level); // 'soft' | 'light' | 'medium' | 'heavy' | 'rigid'
            return;
          }
        } catch (_) { }
        try { if (navigator.vibrate) { navigator.vibrate(level === 'heavy' ? 30 : level === 'medium' ? 20 : 12); } } catch (_) { }
      }

      /* ====== –ö—É–ª–¥–∞—É–Ω 24—á –¥–ª—è ¬´–ó–∞–±—Ä–∞—Ç—å –±–æ–Ω—É—Å¬ª + —Ç–∞–π–º–µ—Ä ====== */
      const COOLDOWN_MS = 0.1 * 60 * 60 * 1000; // 24 —á–∞—Å–∞
      const UID = (TG?.initDataUnsafe?.user?.id) || 'anon';
      const CLAIM_KEY = 'bonusClaim_ts_' + UID;

      function getLastClaim() { return +(localStorage.getItem(CLAIM_KEY) || 0); }
      function setLastClaim(ts = Date.now()) { localStorage.setItem(CLAIM_KEY, String(ts)); }
      function remainingMs() { return Math.max(0, getLastClaim() + COOLDOWN_MS - Date.now()); }
      function fmtClock(ms) {
        const s = Math.floor(ms / 1000);
        const h = Math.floor(s / 3600);
        const m = Math.floor((s % 3600) / 60);
        const ss = s % 60;
        return String(h).padStart(2, '0') + ':' + String(m).padStart(2, '0') + ':' + String(ss).padStart(2, '0');
      }

      let claimTimerId = null;
      function refreshClaimState() {
        if (!claim) return;

        const rem = remainingMs();
        const canClaim = interacted && rem <= 0;

        if (canClaim) {
          claim.disabled = false;
          claim.textContent = '–ó–∞–±—Ä–∞—Ç—å –±–æ–Ω—É—Å';
          if (claimTimerId) { clearInterval(claimTimerId); claimTimerId = null; }
        } else {
          claim.disabled = true;
          if (interacted && rem > 0) {
            claim.textContent = '–î–æ—Å—Ç—É–ø–Ω–æ —á–µ—Ä–µ–∑ ' + fmtClock(rem);
            if (!claimTimerId) {
              claimTimerId = setInterval(() => {
                const r = remainingMs();
                if (r > 0) claim.textContent = '–î–æ—Å—Ç—É–ø–Ω–æ —á–µ—Ä–µ–∑ ' + fmtClock(r);
                else {
                  clearInterval(claimTimerId); claimTimerId = null;
                  claim.textContent = '–ó–∞–±—Ä–∞—Ç—å –±–æ–Ω—É—Å';
                  claim.disabled = !interacted;
                }
              }, 1000);
            }
          } else {
            claim.textContent = '–ó–∞–±—Ä–∞—Ç—å –±–æ–Ω—É—Å';
            if (claimTimerId) { clearInterval(claimTimerId); claimTimerId = null; }
          }
        }
      }

      /* ================== UI ================== */
      function updatePillByIndex(idx) {
        const it = items[idx];
        const name = it?.dataset?.name || '‚Äî';
        const img = it?.querySelector('img')?.src || '';
        if (!pill) return;
        pill.classList.remove('muted');
        pill.innerHTML = img ? `<img src="${img}" alt=""><span>${name}</span>` : name;
        if (claim) {
          claim.disabled = false;
          claim.dataset.bonus = name;
        }
      }

      function updateUI() {
        // –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∫ ¬´–∫–æ–ª—å—Ü–æ¬ª
        items.forEach((el, i) => {
          let dx = i - curr;
          dx = mod(dx + N / 2, N) - N / 2; // (-N/2; N/2]
          const x = dx * STEP;
          const s = 1 - Math.min(Math.abs(dx) * 0.16, 0.48);
          el.style.transform = `translate(-50%,-50%) translateX(${x}px) scale(${s})`;
          el.style.zIndex = String(1000 - Math.abs(dx) * 10);
          el.classList.toggle('active', Math.round(Math.abs(dx)) === 0);
        });

        if (interacted) {
          updatePillByIndex(mod(Math.round(curr), N));
        } else {
          if (pill) { pill.classList.add('muted'); pill.textContent = '–ù–∞–∂–º–∏ ¬´–ö—Ä—É—Ç–∞–Ω—É—Ç—å¬ª'; }
          if (claim) { claim.disabled = true; delete claim.dataset.bonus; }
        }

        // –≤–∞–∂–Ω–æ–µ: —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–Ω–æ–ø–∫–∏ —Å –∫—É–ª–¥–∞—É–Ω–æ–º
        refreshClaimState();
      }

      /* ====== –í—Ä–∞—â–µ–Ω–∏–µ —Å–æ —Å–ª–∞–±–æ–π –≤–∏–±—Ä–∞—Ü–∏–µ–π ====== */
      function spinTo(targetIdx, laps = 1, dur = 1600) {
        const base = nearest(curr, targetIdx, N);
        const dir = (base >= curr ? 1 : -1) || 1;
        const to = base + dir * (laps * N);

        const from = curr, t0 = performance.now();
        let lastPulse = 0;

        function tick(t) {
          const k = Math.min((t - t0) / dur, 1);
          curr = from + (to - from) * (1 - Math.pow(1 - k, 3)); // easeOut
          updateUI();

          // –ª—ë–≥–∫–∏–µ –ø—É–ª—å—Å—ã –≤–æ –≤—Ä–µ–º—è –≤—Ä–∞—â–µ–Ω–∏—è (–≤ –Ω–∞—á–∞–ª–µ —á–∞—â–µ)
          const period = 80 + 180 * k; // 80ms ‚Üí 260ms
          if (t - lastPulse >= period) { hapticPulse('light'); lastPulse = t; }

          if (k < 1) {
            requestAnimationFrame(tick);
          } else {
            curr = to;
            interacted = true;
            updateUI();
          }
        }
        requestAnimationFrame(tick);
      }

      function snapTo(targetIdx, dur = 420) {
        const to = nearest(curr, targetIdx, N);
        const from = curr;
        const t0 = performance.now();
        function tick(t) {
          const k = Math.min((t - t0) / dur, 1);
          curr = from + (to - from) * easeOut(k);
          updateUI();
          if (k < 1) requestAnimationFrame(tick);
          else { curr = to; interacted = true; updateUI(); }
        }
        requestAnimationFrame(tick);
      }

      /* ================== —Å–æ–±—ã—Ç–∏—è ================== */
      // –∫–ª–∏–∫ –ø–æ –∫–∞—Ä—Ç–æ—á–∫–µ ‚Äî —Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –µ—ë
      track.addEventListener('click', (e) => {
        const b = e.target.closest('.bonus'); if (!b) return;
        const idx = items.indexOf(b);
        if (idx >= 0) snapTo(idx, 320);
      });

      // —Å–≤–∞–π–ø / drag
      track.addEventListener('pointerdown', (e) => {
        dragging = true; wheel.classList.add('dragging');
        startX = lastX = e.clientX; lastT = e.timeStamp; startCurr = curr;
        track.setPointerCapture(e.pointerId);
      });
      track.addEventListener('pointermove', (e) => {
        if (!dragging) return;
        const dx = e.clientX - startX;
        curr = startCurr - dx / STEP;               // –±–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è –∫–∞—Ä—É—Å–µ–ª—å
        const dt = e.timeStamp - lastT;
        if (dt > 0) { vel = (e.clientX - lastX) / dt; lastX = e.clientX; lastT = e.timeStamp; }
        updateUI();
      }, { passive: true });
      function endDrag() {
        if (!dragging) return;
        dragging = false; wheel.classList.remove('dragging');
        interacted = true;
        snapTo(mod(Math.round(curr - vel * 6), N), 480);
      }
      track.addEventListener('pointerup', endDrag);
      track.addEventListener('pointercancel', endDrag);

      // ¬´–ö—Ä—É—Ç–∞–Ω—É—Ç—å¬ª ‚Äî –≤—Ä–∞—â–∞–µ–º –∏ —Å—Ä–∞–∑—É –∫–∏–¥–∞–µ–º –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ –∏–∑ –∫–Ω–æ–ø–∫–∏
      spin?.addEventListener('click', () => {
        const idx = Math.floor(Math.random() * N);
        spinTo(idx, 1, 1600);

        const r = spin.getBoundingClientRect();
        confettiBurst(r.left + r.width / 2, r.top + r.height / 2);
      });

      // ¬´–ó–∞–±—Ä–∞—Ç—å –±–æ–Ω—É—Å¬ª ‚Äî —É—á—ë—Ç –∫—É–ª–¥–∞—É–Ω–∞ + –∑–∞–ø–∏—Å—å –≤ –ø—Ä–æ—Ñ–∏–ª—å + –ø–µ—Ä–µ—Ö–æ–¥ –ø–æ —Å—Å—ã–ª–∫–µ
      claim?.addEventListener('click', () => {
        if (claim.disabled) return; // –Ω–∞ –≤—Å—è–∫–∏–π

        const idx = mod(Math.round(curr), N);
        const name = items[idx]?.dataset?.name || '';
        const url = bonusLinks[name];

        // —Ñ–∏–∫—Å–∏—Ä—É–µ–º –≤—Ä–µ–º—è –∫–ª–∏–∫–∞ –∏ –æ–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É/—Ç–∞–π–º–µ—Ä
        setLastClaim();
        refreshClaimState();

        // ‚¨áÔ∏è –î–û–ë–ê–í–õ–ï–ù–û: –æ–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å (–∫—ç—à + UI)
        try {
          window.Profile?.incPoints(100);     // +100 –æ—á–∫–æ–≤
          window.Profile?.setPrize(name);   // –ø–æ—Å–ª–µ–¥–Ω–∏–π –ø—Ä–∏–∑
        } catch (_) { }

        // –ø–µ—Ä–µ—Ö–æ–¥ –ø–æ —Å—Å—ã–ª–∫–µ –ø—Ä–∏–∑–∞
        if (!url) return;
        if (url.startsWith('#')) location.hash = url;
        else if (/^https?:\/\//.test(url)) window.open(url, '_blank');
        else window.location.href = url;
      });


      /* ================== –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ ================== */
      function confettiBurst(x, y) {
        let layer = document.getElementById('confetti');
        if (!layer) { layer = document.createElement('div'); layer.id = 'confetti'; document.body.appendChild(layer); }
        const colors = ['#7b5bff', '#3de0c5', '#ffd166', '#ef476f', '#06d6a0', '#118ab2'];
        const rect = document.body.getBoundingClientRect();
        const ox = (x ?? rect.width / 2), oy = (y ?? rect.height / 3);
        for (let i = 0; i < 36; i++) {
          const el = document.createElement('div');
          el.className = 'confetti-piece';
          el.style.background = colors[i % colors.length];
          const angle = (i / 36) * Math.PI * 2;
          const speed = 140 + Math.random() * 120;
          const dx = Math.cos(angle) * speed, dy = Math.sin(angle) * speed + 220;
          el.style.setProperty('--x', ox + 'px');
          el.style.setProperty('--y', oy + 'px');
          el.style.setProperty('--dx', dx + 'px');
          el.style.setProperty('--dy', dy + 'px');
          layer.appendChild(el);
          setTimeout(() => el.remove(), 950);
        }
      }

      /* —Å—Ç–∞—Ä—Ç */
      updateUI();            // –æ—Ç—Ä–∏—Å–æ–≤–∞—Ç—å –∫–æ–ª–µ—Å–æ + –ø–ª–∞—à–∫—É
      refreshClaimState();   // —Å—Ä–∞–∑—É –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫—É–ª–¥–∞—É–Ω –Ω–∞ –∫–Ω–æ–ø–∫–µ
    })();
  </script>


  <script>
    (function () {
      const TG = window.Telegram && window.Telegram.WebApp;
      try { TG && TG.ready(); } catch (_) { }

      /* ===== —ç–ª–µ–º–µ–Ω—Ç—ã ===== */
      const refInput = document.getElementById('refLink');
      const copyBtn = document.getElementById('copyRef');
      const shareBtn = document.getElementById('shareRef');
      const addBtn = document.getElementById('demoAdd');
      const resetBtn = document.getElementById('demoReset');
      const listEl = document.getElementById('leadList');

      if (!refInput || !listEl) return;

      /* ===== —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ ===== */
      const BOT = 'sales_genius_aibot'; // ‚Üê —Ç–≤–æ–π –±–æ—Ç
      const uidTG = TG?.initDataUnsafe?.user?.id;
      const uname = TG?.initDataUnsafe?.user?.username;
      const YOU = uname ? '@' + uname : '–¢—ã';

      // –§–æ–ª–ª–±–µ–∫-ID –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞ –≤–Ω–µ Telegram
      let anon = localStorage.getItem('anonRefId');
      if (!anon) { anon = Math.random().toString(36).slice(2, 10); localStorage.setItem('anonRefId', anon); }

      const uid = uidTG || anon;
      const refUrl = `https://t.me/${BOT}?start=ref_${uid}`;
      refInput.value = refUrl;

      /* ===== –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ/—à–µ—Ä–∏–Ω–≥ ===== */
      copyBtn?.addEventListener('click', async () => {
        try {
          await navigator.clipboard.writeText(refUrl);
          copyBtn.classList.add('copied');
          copyBtn.textContent = '–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ';
          setTimeout(() => { copyBtn.classList.remove('copied'); copyBtn.textContent = '–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å'; }, 1200);
        } catch (_) {
          prompt('–°–∫–æ–ø–∏—Ä—É–π —Å—Å—ã–ª–∫—É –≤—Ä—É—á–Ω—É—é:', refUrl);
        }
      });

      shareBtn?.addEventListener('click', async () => {
        const text = '–ó–∞—Ö–æ–¥–∏ –ø–æ –º–æ–µ–π —Å—Å—ã–ª–∫–µ ‚Äî –±—É–¥—É—Ç –±–æ–Ω—É—Å—ã üëá';
        if (TG?.openTelegramLink) {
          TG.openTelegramLink(`https://t.me/share/url?url=${encodeURIComponent(refUrl)}&text=${encodeURIComponent(text)}`);
          return;
        }
        if (navigator.share) {
          try { await navigator.share({ title: '–ü–∞—Ä—Ç–Ω—ë—Ä–∫–∞', text, url: refUrl }); return; } catch (_) { }
        }
        copyBtn?.click();
      });

      /* ===== –¥–µ–º–æ-–ª–∏–¥–µ—Ä–±–æ—Ä–¥ (localStorage) ===== */
      const STORE_KEY = 'aff_lead_' + uid;
      function loadData() {
        const raw = localStorage.getItem(STORE_KEY);
        if (raw) { try { return JSON.parse(raw); } catch (_) { } }
        const init = [
          { label: '–¢—ã', handle: YOU, count: 0, self: true },
          { label: '@alice', handle: '@alice', count: 7 },
          { label: '@bob', handle: '@bob', count: 5 },
          { label: '@mike', handle: '@mike', count: 3 },
        ];
        localStorage.setItem(STORE_KEY, JSON.stringify(init));
        return init;
      }
      function saveData(data) { localStorage.setItem(STORE_KEY, JSON.stringify(data)); }
      let data = loadData();

      function renderList() {
        const sorted = [...data].sort((a, b) => b.count - a.count);
        listEl.innerHTML = '';
        sorted.forEach(row => {
          const li = document.createElement('li');
          if (row.self) li.classList.add('me');
          li.innerHTML = `<span>${row.handle || row.label}</span><span>${row.count}</span>`;
          listEl.appendChild(li);
        });
      }
      renderList();

      // +1 –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ (–¥–µ–º–æ)
      addBtn?.addEventListener('click', () => {
        const me = data.find(d => d.self) || data[0];
        me.count++;
        saveData(data);
        renderList();
        // –ª—ë–≥–∫–∏–π –∫–æ–Ω—Ñ–µ—Ç—Ç–∏/—Ö–∞–ø—Ç–∏–∫
        const r = addBtn.getBoundingClientRect();
        (window.confettiBurst || miniConfetti)(r.left + r.width / 2, r.top + r.height / 2);
        try { TG?.HapticFeedback?.impactOccurred('light'); } catch (_) { }
      });

      // –°–±—Ä–æ—Å –¥–µ–º–æ-–¥–∞–Ω–Ω—ã—Ö
      resetBtn?.addEventListener('click', () => {
        localStorage.removeItem(STORE_KEY);
        data = loadData();
        renderList();
      });

      /* ===== –º–∏–Ω–∏-–∫–æ–Ω—Ñ–µ—Ç—Ç–∏, –µ—Å–ª–∏ —É —Ç–µ–±—è –Ω–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω–æ–π confettiBurst ===== */
      function miniConfetti(x, y) {
        let layer = document.getElementById('confetti');
        if (!layer) { layer = document.createElement('div'); layer.id = 'confetti'; Object.assign(layer.style, { position: 'fixed', inset: 0, pointerEvents: 'none', zIndex: 9998 }); document.body.appendChild(layer); }
        const colors = ['#7b5bff', '#3de0c5', '#ffd166', '#ef476f', '#06d6a0', '#118ab2'];
        for (let i = 0; i < 24; i++) {
          const el = document.createElement('div');
          Object.assign(el.style, { position: 'absolute', width: '10px', height: '14px', borderRadius: '2px', background: colors[i % colors.length], left: (x) + 'px', top: (y) + 'px', transform: `translate(-50%,-50%)` });
          layer.appendChild(el);
          const dx = (Math.random() * 2 - 1) * 180, dy = (Math.random() * -1 - 0.3) * 220;
          el.animate([
            { transform: `translate(-50%,-50%) translate(0,0) rotate(0)`, opacity: 1 },
            { transform: `translate(-50%,-50%) translate(${dx}px, ${dy}px) rotate(360deg)`, opacity: 0 }
          ], { duration: 900, easing: 'linear' }).onfinish = () => el.remove();
        }
      }
    })();
  </script>



  <script>
    (function () {
      const box = document.getElementById('chatBox');
      const controls = document.getElementById('chatControls');
      const resetBtn = document.getElementById('chatReset');
      if (!box || !controls) return;

      // === Telegram user avatar for "–û–±–æ –º–Ω–µ" —á–∞—Ç ===
      // (–≤—Å—Ç–∞–≤—å –≠–¢–û –≤–º–µ—Å—Ç–æ —Å—Ç–∞—Ä—ã—Ö const AVA_ME / AVA_USER)

      const TG_ABOUT = window.Telegram && window.Telegram.WebApp;
      const TG_USER = TG_ABOUT?.initDataUnsafe?.user || null;

      // —Ç–≤–æ—è –∞–≤–∞—Ç–∞—Ä–∫–∞ (–º–µ–Ω—è–π –ø—É—Ç—å –ø—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏)
      const AVA_ME = 'me.png';

      // –∞–≤–∞—Ç–∞—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∫–∞—Ä—Ç–∏–Ω–∫–∞ –∏–∑ –∫–æ—Ä–Ω—è,
      // –Ω–æ –¥–∞–ª—å—à–µ –ø—ã—Ç–∞–µ–º—Å—è –ø–æ–¥—Ç—è–Ω—É—Ç—å —Ä–µ–∞–ª—å–Ω—É—é –∏–∑ Telegram
      let AVA_USER = 'user.png';

      // —É—Ç–∏–ª–∏—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏, —á—Ç–æ –∫–∞—Ä—Ç–∏–Ω–∫–∞ –≥—Ä—É–∑–∏—Ç—Å—è
      function imgOk(src) {
        return new Promise(res => {
          const i = new Image();
          i.onload = () => res(true);
          i.onerror = () => res(false);
          i.src = src;
        });
      }

      // –ø—ã—Ç–∞–µ–º—Å—è –≤–∑—è—Ç—å —Ñ–æ—Ç–æ –∏–∑ Telegram -> user.png -> /user.png
      (async function resolveAboutUserAvatar() {
        const cand = [];
        if (TG_USER?.photo_url) cand.push(TG_USER.photo_url);
        cand.push('user.png', '/user.png');

        for (const src of cand) {
          if (await imgOk(src)) {
            AVA_USER = src;
            // –µ—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏—è —É–∂–µ –æ—Ç—Ä–∏—Å–æ–≤–∞–Ω—ã ‚Äî –æ–±–Ω–æ–≤–∏–º –∏—Ö –∞–≤–∞—Ç–∞—Ä
            document.querySelectorAll('#about .msg.user .avatar')
              .forEach(img => { img.src = AVA_USER; img.style.display = 'block'; });
            break;
          }
        }
      })();


      // Telegram haptics (–º—è–≥–∫–æ)
      const TG = window.Telegram && window.Telegram.WebApp;
      function haptic(kind = 'light') {
        try {
          if (TG?.HapticFeedback) {
            if (kind === 'selection') return TG.HapticFeedback.selectionChanged();
            TG.HapticFeedback.impactOccurred(kind);
          } else if (navigator.vibrate) { navigator.vibrate(10); }
        } catch (_) { }
      }

      // Q&A (–ø–æ–¥ —Å–µ–±—è)
      const QA = {
        what: { q: '–ß–µ–º –≤—ã –∑–∞–Ω–∏–º–∞–µ—Ç–µ—Å—å?', a: '–ü–æ–º–æ–≥–∞—é –±–∏–∑–Ω–µ—Å—É —Ä–∞—Å—Ç–∏: –º–∞—Ä–∫–µ—Ç–∏–Ω–≥, –∞–≤—Ç–æ–≤–æ—Ä–æ–Ω–∫–∏, Telegram-–ø—Ä–æ–¥—É–∫—Ç—ã –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞—é —ç–∫–æ–Ω–æ–º–∏–∫—É, —á—Ç–æ–±—ã —Ä–µ–∫–ª–∞–º–∞ –æ–∫—É–ø–∞–ª–∞—Å—å.' },
        price: { q: '–°–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è?', a: '–ü–µ—Ä–≤–∞—è –≤—Å—Ç—Ä–µ—á–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–æ. –î–∞–ª—å—à–µ ‚Äî –ø–æ –∑–∞–ø–∏—Å–∏ –≤ —Ä–∞–∑–¥–µ–ª–µ ¬´–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è¬ª: –≤—ã–±–µ—Ä–∏ —É–¥–æ–±–Ω–æ–µ –≤—Ä–µ–º—è –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ.' },
        start: { q: '–ö–∞–∫ –±—ã—Å—Ç—Ä–æ –Ω–∞—á–Ω—ë–º?', a: '–û–±—ã—á–Ω–æ —Å—Ç–∞—Ä—Ç—É–µ–º –∑–∞ 24‚Äì48 —á–∞—Å–æ–≤. –ü–µ—Ä–≤—ã–µ –ø–æ–Ω—è—Ç–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã ‚Äî –≤ —Ç–µ—á–µ–Ω–∏–µ 1‚Äì2 –Ω–µ–¥–µ–ª—å.' },
        cases: { q: '–ê –∫–µ–π—Å—ã –µ—Å—Ç—å?', a: '–î–∞. –ö–æ—Ä–æ—Ç–∫–∏–π –æ–±–∑–æ—Ä –µ—Å—Ç—å –≤ —Ä–∞–∑–¥–µ–ª–∞—Ö, –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –ø–æ–∫–∞–∂—É –Ω–∞ —Å–æ–∑–≤–æ–Ω–µ.' }
      };

      // –°–æ–æ–±—â–µ–Ω–∏–µ
      function addMsg(role, html) {
        const row = document.createElement('div');
        row.className = 'msg ' + role;

        const avatar = document.createElement('img');
        avatar.className = 'avatar';
        avatar.alt = '';
        avatar.src = (role === 'me') ? AVA_ME : AVA_USER;

        const bubble = document.createElement('div');
        bubble.className = 'bubble';
        bubble.innerHTML = html;

        row.appendChild(avatar);
        row.appendChild(bubble);

        // –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Äî –∞–≤–∞—Ç–∞—Ä —Å–ø—Ä–∞–≤–∞ (—á–µ—Ä–µ–∑ CSS row-reverse)
        if (role === 'user') row.classList.add('user');

        box.appendChild(row);
        box.scrollTop = box.scrollHeight;
        return bubble;
      }

      // ¬´–ü–µ—á–∞—Ç–∞–µ—Ç‚Ä¶¬ª
      function showTyping(role = 'me') {
        const row = document.createElement('div');
        row.className = 'msg ' + role + (role === 'user' ? ' user' : '');

        const avatar = document.createElement('img');
        avatar.className = 'avatar';
        avatar.alt = '';
        avatar.src = (role === 'me') ? AVA_ME : AVA_USER;

        const bubble = document.createElement('div');
        bubble.className = 'bubble';
        bubble.innerHTML = `<div class="typing"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>`;

        row.appendChild(avatar);
        row.appendChild(bubble);
        box.appendChild(row);
        box.scrollTop = box.scrollHeight;

        return () => row.remove();
      }

      // –ò–º–∏—Ç–∞—Ü–∏—è –Ω–∞–±–æ—Ä–∞
      function typeText(role, text, speed = 18) {
        return new Promise(resolve => {
          const stopTyping = showTyping(role);
          setTimeout(() => {
            stopTyping();
            const b = addMsg(role, '');
            let i = 0;
            const timer = setInterval(() => {
              b.textContent = text.slice(0, ++i);
              box.scrollTop = box.scrollHeight;
              if (i >= text.length) { clearInterval(timer); resolve(); }
            }, speed);
          }, 350);
        });
      }

      function disableQuick(disabled) {
        controls.querySelectorAll('.chip').forEach(b => b.disabled = disabled);
      }

      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –±—ã—Å—Ç—Ä—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
      controls.addEventListener('click', async (e) => {
        const btn = e.target.closest('.chip'); if (!btn) return;
        const key = btn.dataset.q; const item = QA[key]; if (!item) return;
        disableQuick(true); haptic('soft');

        addMsg('user', item.q);
        await typeText('me', item.a);
        disableQuick(false);
      });

      // –°–±—Ä–æ—Å
      resetBtn?.addEventListener('click', () => {
        box.innerHTML = '';
        greet();
      });

      // –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
      function greet() {
        addMsg('me', '–ü—Ä–∏–≤–µ—Ç! –Ø –∫–æ—Ä–æ—Ç–∫–æ —Ä–∞—Å—Å–∫–∞–∂—É, —á–µ–º –º–æ–≥—É –±—ã—Ç—å –ø–æ–ª–µ–∑–µ–Ω. –ù–∞–∂–º–∏ –Ω–∞ –ª—é–±–æ–π –≤–æ–ø—Ä–æ—Å –Ω–∏–∂–µ üëá');
      }

      // —Å—Ç–∞—Ä—Ç
      greet();
    })();
  </script>

  <script>
    (function () {
      // ==== Telegram helper ====
      const TG = window.Telegram && window.Telegram.WebApp;
      try { TG && TG.ready && TG.ready(); } catch (_) { }

      // ==== —ç–ª–µ–º–µ–Ω—Ç—ã ====
      const btn = document.querySelector('.profile-toggle');
      const sheet = document.getElementById('profileSheet');
      const close = document.getElementById('profileClose');
      const backdrop = document.getElementById('profileBackdrop');

      const $ = id => document.getElementById(id);
      const avImg = $('psAvatar');
      const avFall = $('psAvaFallback');
      const nameEl = $('psName');
      const handleEl = $('psHandle');
      const pointsEl = $('psPoints');
      const prizeEl = $('psPrize');
      const bookEl = $('psBooking');

      if (!sheet || !backdrop) { console.warn('profileSheet markup not found'); return; }

      // ==== open / close ====
      const open = () => { sheet.classList.add('open'); backdrop.classList.add('open'); sheet.setAttribute('aria-hidden', 'false'); try { TG?.HapticFeedback?.impactOccurred('light'); } catch (_) { } };
      const hide = () => { sheet.classList.remove('open'); backdrop.classList.remove('open'); sheet.setAttribute('aria-hidden', 'true'); };

      btn && btn.addEventListener('click', open);
      close && close.addEventListener('click', hide);
      backdrop.addEventListener('click', hide);

      // —Å–≤–∞–π–ø –≤–Ω–∏–∑ –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è
      let startY = 0, dy = 0;
      sheet.addEventListener('touchstart', e => { startY = e.touches[0].clientY; dy = 0; }, { passive: true });
      sheet.addEventListener('touchmove', e => { dy = e.touches[0].clientY - startY; if (dy > 0) sheet.style.transform = `translateY(${dy}px)`; }, { passive: true });
      sheet.addEventListener('touchend', () => { if (dy > 40) hide(); sheet.style.transform = ''; });

      // ==== –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ Telegram + –∫—ç—à ====
      const u = TG?.initDataUnsafe?.user || null;
      const fullName = u ? [u.first_name, u.last_name].filter(Boolean).join(' ') : '';
      const handle = u?.username ? '@' + u.username : '‚Äî';
      const UID = (u && u.id) ? String(u.id) : 'anon';

      nameEl.textContent = fullName || '–ì–æ—Å—Ç—å';
      handleEl.textContent = handle;

      (async function setAvatar() {
        const trySrc = async (src) => new Promise(r => { const i = new Image(); i.onload = () => r(true); i.onerror = () => r(false); i.src = src; });
        const cand = [];
        if (u?.photo_url) cand.push(u.photo_url);
        cand.push('user.png', '/user.png');
        for (const src of cand) {
          if (await trySrc(src)) { avImg.src = src; avImg.style.display = 'block'; avFall.style.display = 'none'; return; }
        }
        // fallback ‚Äî –ø–µ—Ä–≤–∞—è –±—É–∫–≤–∞
        const letter = (fullName?.trim?.()[0] || u?.username?.[0] || '–ì').toUpperCase();
        avFall.textContent = letter;
      })();

      // ==== –∫—ç—à —Å—Ç–∞—Ç–æ–≤ ====
      const K_POINTS = 'profile:points:' + UID;
      const K_PRIZE = 'profile:lastPrize:' + UID;
      const K_BOOK = 'profile:booking:' + UID;

      function fmtBooking(v) {
        if (!v) return '–ù–µ—Ç';
        if (v === 'yes') return '–î–∞'; if (v === 'no') return '–ù–µ—Ç';
        const d = new Date(v); if (!isNaN(d)) {
          const dd = String(d.getDate()).padStart(2, '0'); const mm = String(d.getMonth() + 1).padStart(2, '0');
          const hh = String(d.getHours()).padStart(2, '0'); const mi = String(d.getMinutes()).padStart(2, '0');
          return `${dd}.${mm} ${hh}:${mi}`;
        }
        return String(v);
      }

      function renderFromCache() {
        const points = +(localStorage.getItem(K_POINTS) || 0);
        const prize = localStorage.getItem(K_PRIZE) || '‚Äî';
        const book = localStorage.getItem(K_BOOK) || '';
        pointsEl.textContent = points.toLocaleString('ru-RU');
        prizeEl.textContent = prize;
        bookEl.textContent = fmtBooking(book);
      }
      renderFromCache();

      // ==== —ç–∫—Å–ø–æ—Ä—Ç –¥–ª—è –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª–µ–π (–±–æ–Ω—É—Å—ã/–∫–∞–ª–µ–Ω–¥–∞—Ä—å) ====
      window.Profile = {
        uid: UID,
        incPoints(n = 1) { const cur = +(localStorage.getItem(K_POINTS) || 0) + n; localStorage.setItem(K_POINTS, String(cur)); renderFromCache(); },
        setPrize(name) { localStorage.setItem(K_PRIZE, name || '‚Äî'); renderFromCache(); },
        setBooking(v) { localStorage.setItem(K_BOOK, v || ''); renderFromCache(); }
      };
    })();
  </script>

<script>
/* ===== 1) –ö–∞—Ä—É—Å–µ–ª—å —Ç–∞—Ä–∏—Ñ–æ–≤: —è–∫–æ—Ä—å —Å–≤–µ—Ä—Ö—É, –∏–Ω–µ—Ä—Ü–∏—è, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ wheel/trackpad ===== */
(function setupTariffCarousel(){
  const wheelEl = document.getElementById('tariffWheel');
  const list    = document.getElementById('tariffList');
  if (!wheelEl || !list) return;

  // –¢—é–Ω–∏–Ω–≥ –ø–æ–¥ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
  const TOP_OFFSET_PX = 6;
  const IS_DESK       = window.matchMedia('(pointer:fine)').matches; // –º—ã—à—å/—Ç–∞—á–ø–∞–¥
  const SCROLL_GAIN   = IS_DESK ? 1.10 : 0.75; // –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ
  const MOMENTUM_GAIN = IS_DESK ? 22   : 16;   // –∏–Ω–µ—Ä—Ü–∏—è
  const FRICTION      = IS_DESK ? 0.92 : 0.90; // —Ç—Ä–µ–Ω–∏–µ
  const FRAME_STEP    = IS_DESK ? 10   : 9;   // —à–∞–≥

  wheelEl.style.touchAction = IS_DESK ? 'pan-y' : 'none';
  wheelEl.style.userSelect  = 'none';
  wheelEl.style.overscrollBehavior = 'contain';

  // –ò—Å—Ö–æ–¥–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏
  const orig = Array.from(list.querySelectorAll('.tariff'));
  if (orig.length < 2) return;

  // –ì–µ–æ–º–µ—Ç—Ä–∏—è
  const gapFrom = () => parseFloat(getComputedStyle(list).rowGap || getComputedStyle(list).gap || 12) || 12;
  let gap   = gapFrom();
  let cardH = Math.round(orig[0].getBoundingClientRect().height);
  let STEP  = cardH + gap;
  const N   = orig.length;

  // –ö–ª–æ–Ω—ã –¥–ª—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–π –ª–µ–Ω—Ç—ã
  const pre  = orig.map(n => n.cloneNode(true));
  const post = orig.map(n => n.cloneNode(true));
  list.prepend(...pre);
  list.append(...post);

  const nodes  = () => Array.from(list.querySelectorAll('.tariff'));
  const padTop = () => (parseFloat(getComputedStyle(wheelEl).paddingTop) || 0) + TOP_OFFSET_PX;

  function infiniteLoopFix(){
    const min = STEP * (N * 0.5), max = STEP * (N * 2.5);
    if (wheelEl.scrollTop < min)      wheelEl.scrollTop += STEP * N;
    else if (wheelEl.scrollTop > max) wheelEl.scrollTop -= STEP * N;
  }

  function findNearestTop(){
    const anchor = wheelEl.scrollTop + padTop();
    let best=null, bestDist=1e9;
    for (const el of nodes()){
      const d = Math.abs(el.offsetTop - anchor);
      if (d < bestDist){ bestDist = d; best = el; }
    }
    return best || nodes()[0];
  }
  function markActiveTop(){
    const best = findNearestTop();
    nodes().forEach(el => el.classList.toggle('active', el === best));
  }

  // –ü–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞/–≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ
  let animId=0, fromTop=0, toTop=0, t0=0, DUR=420;
  function stopAnim(){ cancelAnimationFrame(animId); animId=0; }
  function animateTo(dest){
    stopAnim();
    fromTop = wheelEl.scrollTop; toTop = dest; t0 = performance.now();
    DUR = Math.min(620, 240 + Math.abs(dest - fromTop)*0.25);
    const tick = (t)=>{
      const k = Math.min((t - t0)/DUR, 1);
      const e = 1 - Math.pow(1 - k, 3);
      wheelEl.scrollTop = fromTop + (toTop - fromTop)*e;
      infiniteLoopFix(); requestAnimationFrame(markActiveTop);
      if (k < 1) animId = requestAnimationFrame(tick);
    };
    animId = requestAnimationFrame(tick);
  }
  function alignTop(el, behavior='smooth'){
    const target = el.offsetTop - padTop();
    if (behavior==='auto'){ wheelEl.scrollTop = target; infiniteLoopFix(); markActiveTop(); }
    else animateTo(target);
  }

  // –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ (pointer)
  let dragging=false, lastY=0, lastT=0, v=0, pid=0;
  wheelEl.addEventListener('pointerdown', (e)=>{
    dragging=true; wheelEl.setPointerCapture(e.pointerId); pid=e.pointerId;
    stopAnim(); lastY=e.clientY; lastT=e.timeStamp; v=0;
  });
  wheelEl.addEventListener('pointermove', (e)=>{
    if (!dragging || e.pointerId!==pid) return;
    const dy=e.clientY-lastY, dt=Math.max(1, e.timeStamp-lastT);
    wheelEl.scrollTop -= dy * SCROLL_GAIN;
    infiniteLoopFix(); v=(dy/dt); lastY=e.clientY; lastT=e.timeStamp;
    e.preventDefault(); markActiveTop();
  }, {passive:false});
  function endDrag(e){ if(!dragging || (e && e.pointerId!==pid)) return; dragging=false; startMomentum(v); }
  wheelEl.addEventListener('pointerup', endDrag);
  wheelEl.addEventListener('pointercancel', endDrag);
  wheelEl.addEventListener('pointerleave', endDrag);

  // –ö–æ–ª—ë—Å–∏–∫–æ/—Ç—Ä–µ–∫–ø–∞–¥
  let wheelLastT = 0, wheelV = 0, wheelTimer = null;
  wheelEl.addEventListener('wheel', (e) => {
    e.preventDefault();
    stopAnim();
    const now = performance.now();
    const dt  = Math.max(1, now - (wheelLastT || now));
    const dy  = e.deltaY;

    wheelEl.scrollTop += dy * (IS_DESK ? 1.0 : 0.85);
    infiniteLoopFix(); markActiveTop();

    wheelV     = dy / dt;
    wheelLastT = now;
    clearTimeout(wheelTimer);
    wheelTimer = setTimeout(() => startMomentum(wheelV), 40);
  }, { passive: false });

  // –ò–Ω–µ—Ä—Ü–∏—è
  function startMomentum(v0){
    stopAnim();
    let vy = v0 * MOMENTUM_GAIN;
    const spin = ()=>{
      vy *= FRICTION;
      wheelEl.scrollTop -= vy * FRAME_STEP;
      infiniteLoopFix(); requestAnimationFrame(markActiveTop);
      if (Math.abs(vy) > 0.08) animId = requestAnimationFrame(spin);
      else alignTop(findNearestTop(),'smooth');
    };
    animId = requestAnimationFrame(spin);
  }

  // –ö–ª–∏–∫ –ø–æ –∫–∞—Ä—Ç–æ—á–∫–µ ‚Äî –ø—Ä–∏–ª–∏–ø–∞–Ω–∏–µ –∫ –≤–µ—Ä—Ö—É
  list.addEventListener('click', (e)=>{
    const card = e.target.closest('.tariff'); if (!card) return;
    alignTop(card,'smooth');
  });

  // –°—Ç–∞—Ä—Ç
  const firstMid = nodes()[pre.length];
  requestAnimationFrame(()=> { alignTop(firstMid,'auto'); });

  // –†–µ—Ñ–ª–æ—É –≥–µ–æ–º–µ—Ç—Ä–∏–∏ ‚Üí –ø–µ—Ä–µ—Å—á—ë—Ç —à–∞–≥–∞
  document.addEventListener('tariff:reflow', ()=>{
    const mid = nodes()[pre.length];
    if (!mid) return;
    const hNew = Math.round(mid.getBoundingClientRect().height);
    gap   = gapFrom();
    if (hNew){ cardH = hNew; STEP = cardH + gap; alignTop(findNearestTop(), 'auto'); }
  });

  // –û–±—â–µ–µ: —Ä–µ—Å–∞–π–∑/–≤–∏–¥–∏–º–æ—Å—Ç—å ‚Üí –ø—Ä–æ—Å–∏–º —Ä–µ—Ñ–ª–æ—É
  window.addEventListener('resize', ()=>document.dispatchEvent(new Event('tariff:reflow')));
  document.addEventListener('visibilitychange', ()=>{ if(!document.hidden) document.dispatchEvent(new Event('tariff:reflow')); });

  // –°–æ–æ–±—â–∞–µ–º, —á—Ç–æ –ª–µ–Ω—Ç–∞ –≥–æ—Ç–æ–≤–∞ (–ø–µ—Ä–µ—Å—á—ë—Ç —Ü–µ–Ω —É—á–∏—Ç—ã–≤–∞–µ—Ç –∫–ª–æ–Ω—ã)
  document.dispatchEvent(new CustomEvent('tariff:ready'));
  
})();

/* ===== 2) –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –ú–µ—Å—è—Ü/–ì–æ–¥ + –ø–µ—Ä–µ—Å—á—ë—Ç —Ü–µ–Ω ===== */
(function tariffPricing(){
  const row  = document.getElementById('planRow');
  const list = document.getElementById('tariffList');
  if (!row || !list) return;

  let plan = 'month'; // –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º ¬´–ú–µ—Å—è—Ü¬ª –Ω–∞ —Å—Ç–∞—Ä—Ç–µ
  row.querySelectorAll('.plan-btn').forEach(b => b.classList.toggle('active', b.dataset.plan === plan));
  const fmt  = n => n.toLocaleString('ru-RU');
  const note = p => p==='year' ? ' / –≥–æ–¥' : ' / –º–µ—Å';

  function apply(){
    list.querySelectorAll('.service-card').forEach(card=>{
      const base  = +card.dataset.month || 0;
      const price = (plan==='year') ? Math.round(base*0.85) : base;
      const num = card.querySelector('.price .num');
      const nte = card.querySelector('.price-note');
      if (num) num.textContent = fmt(price);
      if (nte) nte.textContent = note(plan);
    });
    document.dispatchEvent(new Event('tariff:reflow')); // –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∞—Ç—å —à–∞–≥/–≤—ã—Å–æ—Ç—É
  }

  row.addEventListener('click', (e)=>{
    const b = e.target.closest('.plan-btn'); if (!b) return;
    row.querySelectorAll('.plan-btn').forEach(x=>x.classList.toggle('active', x===b));
    plan = b.dataset.plan || 'month';
    apply();
  });

  document.addEventListener('tariff:ready', apply); // –ø–µ—Ä–≤—ã–π —Ä–∞—Å—Å—á—ë—Ç –ø–æ—Å–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ª–µ–Ω—Ç—ã
})();

/* ===== 3) –ê–Ω—Ç–∏-–∑–∞–ª–∏–ø: –≤—ã—Å–æ—Ç–∞ –æ–∫–Ω–∞ = N*STEP, –∞–≤—Ç–æ–ø–æ–¥—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∏ –ª—é–±—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö ===== */
(function tuneTariffWheelHeight(){
  const wheel = document.getElementById('tariffWheel');
  const list  = document.getElementById('tariffList');
  if (!wheel || !list) return;

  const MQ_DESK = window.matchMedia('(min-width:1024px)');
  const rows    = () => (MQ_DESK.matches ? 4 : 3); // 4 –∫–∞—Ä—Ç–æ—á–∫–∏ –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ, 3 ‚Äî –Ω–∞ –º–æ–±–∏–ª–µ
  const TOP_OFFSET_PX = 3;

  const nodes = () => Array.from(list.querySelectorAll('.tariff'));
  const getGap = () => parseFloat(getComputedStyle(list).rowGap || getComputedStyle(list).gap || 12) || 12;

  function measureStep(){
    const mid = nodes()[Math.floor(nodes().length/2)] || nodes()[0];
    if (!mid) return 200;
    const h = Math.round(mid.getBoundingClientRect().height);
    return h + getGap();
  }
  function applyHeight(){
    const step = measureStep();
    const pTop = parseFloat(getComputedStyle(wheel).paddingTop) || 0;
    const pBot = parseFloat(getComputedStyle(wheel).paddingBottom) || 0;
    wheel.style.height = Math.round(step*rows() + pTop + pBot + TOP_OFFSET_PX) + 'px';
  }
  function reflowAndSnap(){
    let last=0, tries=0;
    (function probe(){
      const cur = measureStep();
      if (Math.abs(cur-last) < 1 || tries>12){
        applyHeight();
        document.dispatchEvent(new Event('tariff:reflow')); // –ø—É—Å—Ç—å –∫–∞—Ä—É—Å–µ–ª—å –ø–µ—Ä–µ—Å—á–∏—Ç–∞–µ—Ç STEP –∏ ¬´–ø—Ä–∏–∫–ª–µ–∏—Ç—Å—è¬ª
      } else { last=cur; tries++; requestAnimationFrame(probe); }
    })();
  }

  reflowAndSnap();
  window.addEventListener('resize', reflowAndSnap);
  window.addEventListener('pageshow', e => { if (e.persisted) reflowAndSnap(); });
  document.addEventListener('visibilitychange', ()=>{ if (!document.hidden) reflowAndSnap(); });
  document.addEventListener('tariff:ready',  reflowAndSnap);
  document.addEventListener('tariff:reflow', reflowAndSnap);
  document.fonts?.ready?.then(reflowAndSnap).catch(()=>{});

  // —Å–º–µ–Ω–∞ –±—Ä–µ–π–∫–ø–æ–∏–Ω—Ç–∞ (–º–æ–±–∞–π–ª/–¥–µ—Å–∫—Ç–æ–ø)
  MQ_DESK.addEventListener?.('change', reflowAndSnap) || MQ_DESK.addListener(reflowAndSnap);
})();
</script>

<script>
/* === Haptics (Telegram + fallback) ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –≤–µ—Ä—Å–∏—è =================== */
(function hapticsInit(){
  const TG = window.Telegram && window.Telegram.WebApp;
  window.haptic = function(level='light', kind='impact'){
    if (document.hidden) return;
    try{
      if (TG?.HapticFeedback){
        if (kind === 'selection') return TG.HapticFeedback.selectionChanged();
        TG.HapticFeedback.impactOccurred(level); // 'soft'|'light'|'medium'|'heavy'|'rigid'
        return;
      }
    }catch(_){}
    try{
      if (navigator.vibrate){
        navigator.vibrate(level==='heavy'?28 : level==='medium'?18 : 10);
      }
    }catch(_){}
  };
})();
</script>

<script>
/* === Haptics (Telegram + fallback) ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –≤–µ—Ä—Å–∏—è =================== */
(function hapticsInit(){
  const TG = window.Telegram && window.Telegram.WebApp;
  window.haptic = function(level='light', kind='impact'){
    if (document.hidden) return;
    try{
      if (TG?.HapticFeedback){
        if (kind === 'selection') return TG.HapticFeedback.selectionChanged();
        TG.HapticFeedback.impactOccurred(level); // 'soft'|'light'|'medium'|'heavy'|'rigid'
        return;
      }
    }catch(_){}
    try{
      if (navigator.vibrate){
        navigator.vibrate(level==='heavy'?28 : level==='medium'?18 : 10);
      }
    }catch(_){}
  };
})();
</script>

<script>
/* === Haptics (Telegram + fallback) =============================== */
(function hapticsInit(){
  const TG = window.Telegram && window.Telegram.WebApp;
  window.haptic = function(level='light', kind='impact'){
    try{
      if (TG?.HapticFeedback){
        if (kind === 'selection') return TG.HapticFeedback.selectionChanged();
        TG.HapticFeedback.impactOccurred(level); // 'soft'|'light'|'medium'|'heavy'|'rigid'
        return;
      }
    }catch(_){}
    try{
      if (navigator.vibrate){
        navigator.vibrate(level==='heavy'?28 : level==='medium'?18 : 10);
      }
    }catch(_){}
  };
})();

/* === Haptic –¥–ª—è —Ç–∞—Ä–∏—Ñ–æ–≤ –∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è –ú–µ—Å—è—Ü/–ì–æ–¥ ================== */
(function hapticsForTariffs(){
  const list = document.getElementById('tariffList');
  const plan = document.getElementById('planRow');
  if (!list) return;

  let lastActive = null;

  // –Ω–∞–±–ª—é–¥–∞–µ–º —Å–º–µ–Ω—É –∞–∫—Ç–∏–≤–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏
  const obs = new MutationObserver(()=>{
    const active = list.querySelector('.tariff.active');
    if (active && active !== lastActive){
      lastActive = active;
      window.haptic?.('light','selection');
    }
  });
  obs.observe(list, {subtree:true, attributes:true, attributeFilter:['class']});

  // –∫–ª–∏–∫ –ø–æ –∫–∞—Ä—Ç–æ—á–∫–µ = –ª—ë–≥–∫–∏–π –∏–º–ø–∞–∫—Ç
  list.addEventListener('click', (e)=>{
    if (e.target.closest('.tariff')) window.haptic?.('light');
  });

  // –æ—Ç–¥–µ–ª—å–Ω—ã–π –æ—Ç–∫–ª–∏–∫ –Ω–∞ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å ¬´–ú–µ—Å—è—Ü / –ì–æ–¥¬ª
  plan?.addEventListener('click', (e)=>{
    if (e.target.closest('.plan-btn')) window.haptic?.('medium');
  });
})();
</script>

<script>
(function mountBonusPics(){
  const repoPrefix = (() => {
    // –µ—Å–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤–∏–¥–∞ /–í–ê–®_–†–ï–ü–û/..., –≤–æ–∑—å–º—ë–º —ç—Ç–æ—Ç —Å–µ–≥–º–µ–Ω—Ç –∫–∞–∫ –ø—Ä–µ—Ñ–∏–∫—Å
    const seg = location.pathname.split('/').filter(Boolean)[0];
    // –¥–ª—è user/organization pages (–∏–ª–∏ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞) –ø—Ä–µ—Ñ–∏–∫—Å –ø—É—Å—Ç–æ–π
    return (seg && !/\.io$/.test(location.hostname)) ? '/' + seg : '';
  })();
  const PREFIX = window.ASSET_PREFIX || repoPrefix || '';

  document.querySelectorAll('#bonuses .bonus-item').forEach(it=>{
    const pic = it.querySelector('.pic'); if (!pic) return;
    let src = (it.dataset.img || '').trim(); if (!src) return;

    if (/^https?:\/\//i.test(src)) {
      // as is
    } else if (src.startsWith('/miniapp/')) {
      // as is (–∞–±—Å–æ–ª—é—Ç)
    } else if (src.startsWith('miniapp/')) {
      src = PREFIX + '/' + src.replace(/^\/+/, '');
    } else if (src.startsWith('/')) {
      // –∫–æ—Ä–µ–Ω—å —Å–∞–π—Ç–∞ ‚Äî as is
    } else {
      src = PREFIX + '/miniapp/' + src.replace(/^\/+/, '');
    }

    pic.classList.add('loading');
    const img = new Image();
    img.alt = it.querySelector('.h2, h3')?.textContent?.trim() || 'bonus';
    img.loading = 'lazy'; img.decoding = 'async'; img.src = src;

    img.onload  = ()=> pic.classList.remove('loading');
    img.onerror = ()=>{ img.src = PREFIX + '/placeholder.png'; pic.classList.remove('loading'); };

    pic.innerHTML = ''; pic.appendChild(img);
  });
})();
</script>



</body>

</html>
